!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.smallchart=e():t.smallchart=e()}(self,(function(){return(()=>{"use strict";var t={155:(t,e,i)=>{function r(t){return Math.min.apply(Math,t)}function s(t){return Math.max.apply(Math,t)}function n(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}i.r(e),i.d(e,{default:()=>a});class h{constructor(t){this.dom=t,this.width="",this.height="",this.svg="",this.max="",this.min="",this.margin=""}static init(t){return new h(t)}dealSeries(t){return t.map((t=>{const{data:e,limit:i=e.length}=t,n=function({data:t,limit:e,width:i=1,height:n=1,max:h=s(t),min:a=r(t),margin:o}){const l=t.length;e&&e<l&&(t=t.slice(l-e));const c=(n-2*o)/(h-a||2),u=(i-2*o)/((e||l)-(l>1?1:0));return t.map(((t,e)=>({x:e*u+o,y:(h===a?1:h-t)*c+o})))}({data:e,limit:i,width:this.width,height:this.height,max:this.max,min:this.min,margin:this.margin});return{...t,limit:i,pointArr:n}}))}createPath(t){const e=n("g");return this.dealSeries(t).forEach((t=>{switch(t.type){case"line":!function(t,e,i){let{pointArr:r,smooth:s}=t,h=function(t,e){let i;if(e){let e;i=t.map((t=>function(t){let i;if(e){const r=.5*(t.x-e.x);i=["C",e.x+r,e.y,t.x-r,t.y,t.x,t.y]}else i=[t.x,t.y];return e=t,i}(t))).reduce(((t,e)=>t.concat(e)))}else i=t.map((t=>[t.x,t.y])).reduce(((t,e)=>t.concat(e)));return i}(r,s);const a=h.concat([s?`L ${r[r.length-1].x}`:r[r.length-1].x,e.height-e.margin,e.margin,e.height-e.margin]);let o={...t,pointsPath:h,closePointsPath:a};s?function(t,e){let i=n("path");if(i.setAttribute("d",`M${e.pointsPath.join(" ")}`),i.setAttribute("stroke",e.stroke||"slategray"),i.setAttribute("stroke-width",e.strokeWidth||2),i.setAttribute("stroke-dasharray",e.strokeDasharray||"none"),i.setAttribute("fill","none"),t.appendChild(i),e.fill){let r=n("path");r.setAttribute("d",`M${e.closePointsPath.join(" ")}`),r.setAttribute("fill",e.fill),r.setAttribute("fill-opacity",e.fillOpacity||".2"),t.insertBefore(r,i)}}(i,o):function(t,e){let i=n("polyline");if(i.setAttribute("points",e.pointsPath),i.setAttribute("stroke",e.stroke||"slategray"),i.setAttribute("stroke-width",e.strokeWidth||2),i.setAttribute("stroke-dasharray",e.strokeDasharray||"none"),i.setAttribute("fill","none"),t.appendChild(i),e.fill){let r=n("polyline");r.setAttribute("points",e.closePointsPath),r.setAttribute("fill",e.fill),r.setAttribute("fill-opacity",e.fillOpacity||".2"),t.insertBefore(r,i)}}(i,o)}(t,this,e);break;case"bar":!function(t,e,i){let{pointArr:r,data:s,limit:h}=t;const a=e.margin?2*e.margin:0,o=s.length===h,l=o?(e.width-h*a)/h:r&&r.length>=2?Math.max(0,r[1].x-r[0].x-a):0;if(l<1)throw new Error("Too much data, please enlarge the width or reduce the margin");r.forEach(((r,h)=>{const c=o?Math.ceil((l+a)*h+e.margin):Math.ceil(r.x*h),u=Math.ceil(r.y),p=Math.ceil(l),d=Math.ceil(Math.max(0,e.height-r.y)),m=s[h];!function(t,e,{x:i,y:r,width:s,height:h,num:a}){let o=n("rect");o.setAttribute("x",i),o.setAttribute("y",r),o.setAttribute("width",s),o.setAttribute("height",h),o.setAttribute("num",a),o.setAttribute("fill",e.fill||"#409EFF"),t.appendChild(o)}(i,t,{x:c,y:u,width:p,height:d,num:m})}))}(t,this,e)}})),e}setOption(t={}){let{width:e=100,height:i=30,series:r,max:s,min:h,margin:a=2}=t;if(this.width=e,this.height=i,this.max=s,this.min=h,this.margin=a,!r)throw new Error("Please option must have series!");this.svg?(this.svg.innerHTML="",this.svg.appendChild(this.createPath(r))):(this.svg=n("svg"),this.svg.setAttribute("viewBox",`0 0 ${e} ${i}`),this.svg.setAttribute("style",`width:${e}px; height:${i}px`),this.svg.appendChild(this.createPath(r)),this.dom.appendChild(this.svg))}}const a=h}},e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={exports:{}};return t[r](s,s.exports,i),s.exports}return i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(155)})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFsbGNoYXJ0L3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9zbWFsbGNoYXJ0Ly4vc3JjL3V0aWxzL3V0aWwuanMiLCJ3ZWJwYWNrOi8vc21hbGxjaGFydC8uL3NyYy9zbWFsbGNoYXJ0LmpzIiwid2VicGFjazovL3NtYWxsY2hhcnQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc21hbGxjaGFydC93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vc21hbGxjaGFydC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vc21hbGxjaGFydC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3NtYWxsY2hhcnQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwiYXJyYXlNaW4iLCJkYXRhIiwiTWF0aCIsIm1pbiIsImFwcGx5IiwiYXJyYXlNYXgiLCJtYXgiLCJjcmVhdGVOcyIsInR5cGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnROUyIsIlNtYWxsQ2hhcnQiLCJkb20iLCJ0aGlzIiwid2lkdGgiLCJoZWlnaHQiLCJzdmciLCJtYXJnaW4iLCJzZXJpZXMiLCJtYXAiLCJpdGVtIiwibGltaXQiLCJsZW5ndGgiLCJwb2ludEFyciIsImxlbiIsInNsaWNlIiwiaCIsInciLCJkIiwiaSIsIngiLCJ5IiwiZGF0YVRvUG9pbnRzIiwiZyIsImRlYWxTZXJpZXMiLCJmb3JFYWNoIiwiX3RoaXMiLCJzbW9vdGgiLCJwb2ludHNQYXRoIiwicHJldiIsInAiLCJyZXMiLCJjdXJ2ZSIsInJlZHVjZSIsImEiLCJiIiwiY29uY2F0IiwicG9pbnRzVG9QYXRoIiwiY2xvc2VQb2ludHNQYXRoIiwicGFyZW50IiwicGF0aCIsInNldEF0dHJpYnV0ZSIsImpvaW4iLCJzdHJva2UiLCJzdHJva2VXaWR0aCIsInN0cm9rZURhc2hhcnJheSIsImFwcGVuZENoaWxkIiwiZmlsbCIsImZpbGxQYXRoIiwiZmlsbE9wYWNpdHkiLCJpbnNlcnRCZWZvcmUiLCJhcHBlbmRQYXRoIiwiYXBwZW5kUG9seWxpbmUiLCJkZWFsTGluZURhdGEiLCJtYXJnaW5XaWR0aCIsIm5vTGltaXQiLCJiYXJXaWR0aCIsIkVycm9yIiwiY2VpbCIsIm51bSIsInJlY3QiLCJhcHBlbmRSZWN0IiwiZGVhbEJhckRhdGEiLCJvcHRpb24iLCJpbm5lckhUTUwiLCJjcmVhdGVQYXRoIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUEyQ0EsRUFBTUMsR0FDMUIsaUJBQVpDLFNBQTBDLGlCQUFYQyxPQUN4Q0EsT0FBT0QsUUFBVUQsSUFDUSxtQkFBWEcsUUFBeUJBLE9BQU9DLElBQzlDRCxPQUFPLEdBQUlILEdBQ2UsaUJBQVpDLFFBQ2RBLFFBQW9CLFdBQUlELElBRXhCRCxFQUFpQixXQUFJQyxJQVJ2QixDQVNHSyxNQUFNLFdBQ1QsTSx3Q0NWTyxTQUFTQyxFQUFTQyxHQUN2QixPQUFPQyxLQUFLQyxJQUFJQyxNQUFNRixLQUFNRCxHQUd2QixTQUFTSSxFQUFTSixHQUN2QixPQUFPQyxLQUFLSSxJQUFJRixNQUFNRixLQUFNRCxHQUd2QixTQUFTTSxFQUFTQyxHQUN2QixPQUFPQyxTQUFTQyxnQkFBZ0IsNkJBQThCRixHLDhCQ1BoRSxNQUFNRyxFQUNKLFlBQVlDLEdBQ1ZDLEtBQUtELElBQU1BLEVBQ1hDLEtBQUtDLE1BQVEsR0FDYkQsS0FBS0UsT0FBUyxHQUNkRixLQUFLRyxJQUFNLEdBQ1hILEtBQUtQLElBQU0sR0FDWE8sS0FBS1YsSUFBTSxHQUNYVSxLQUFLSSxPQUFTLEdBR2hCLFlBQVlMLEdBQ1YsT0FBTyxJQUFJRCxFQUFXQyxHQUd4QixXQUFXTSxHQUNULE9BQU9BLEVBQU9DLEtBQUtDLElBQ2pCLE1BQU0sS0FDSm5CLEVBQUksTUFDSm9CLEVBQVFwQixFQUFLcUIsUUFDWEYsRUFDRUcsRURrQ0wsVUFDTCxLQUNFdEIsRUFBSSxNQUNKb0IsRUFBSyxNQUNMUCxFQUFRLEVBQUMsT0FDVEMsRUFBUyxFQUFDLElBQ1ZULEVBQU1ELEVBQVNKLEdBQUssSUFDcEJFLEVBQU1ILEVBQVNDLEdBQUssT0FDcEJnQixJQUdGLE1BQU1PLEVBQU12QixFQUFLcUIsT0FFYkQsR0FBU0EsRUFBUUcsSUFDbkJ2QixFQUFPQSxFQUFLd0IsTUFBTUQsRUFBTUgsSUFHMUIsTUFBTUssR0FBS1gsRUFBa0IsRUFBVEUsSUFBZ0JYLEVBQU1ILEdBQVEsR0FDNUN3QixHQUFLYixFQUFpQixFQUFURyxLQUFnQkksR0FBU0csSUFBUUEsRUFBTSxFQUFJLEVBQUksSUFFbEUsT0FBT3ZCLEVBQUtrQixLQUFJLENBQUNTLEVBQUdDLEtBQU0sQ0FDeEJDLEVBQUdELEVBQUlGLEVBQUlWLEVBQ1hjLEdBQUl6QixJQUFRSCxFQUFNLEVBQUtHLEVBQU1zQixHQUFNRixFQUFJVCxNQ3hEcEJlLENBQWEsQ0FDNUIvQixPQUNBb0IsUUFDQVAsTUFBT0QsS0FBS0MsTUFDWkMsT0FBUUYsS0FBS0UsT0FDYlQsSUFBS08sS0FBS1AsSUFDVkgsSUFBS1UsS0FBS1YsSUFDVmMsT0FBUUosS0FBS0ksU0FFZixNQUFPLElBQUlHLEVBQU1DLFFBQU9FLGVBSTVCLFdBQVdMLEdBQ1QsTUFBTWUsRUFBSTFCLEVBQVMsS0FlbkIsT0FkV00sS0FBS3FCLFdBQVdoQixHQUN0QmlCLFNBQVNOLElBQ1osT0FBUUEsRUFBRXJCLE1BQ1IsSUFBSyxRRDBFTixTQUFzQlksRUFBTWdCLEVBQU9ILEdBQ3hDLElBQUksU0FBQ1YsRUFBUSxPQUFFYyxHQUFVakIsRUFFckJrQixFQW5DQyxTQUFzQmYsRUFBVWMsR0FDckMsSUFBSUMsRUFDSixHQUFJRCxFQUFRLENBQ1YsSUFBSUUsRUFzQkpELEVBQWFmLEVBQVNKLEtBQUlxQixHQXBCMUIsU0FBZUEsR0FDYixJQUFJQyxFQUNKLEdBQUtGLEVBRUUsQ0FDTCxNQUFNZixFQUF1QixJQUFoQmdCLEVBQUVWLEVBQUlTLEVBQUtULEdBQ3hCVyxFQUFNLENBQ0osSUFDQUYsRUFBS1QsRUFBSU4sRUFDVGUsRUFBS1IsRUFDTFMsRUFBRVYsRUFBSU4sRUFDTmdCLEVBQUVULEVBQ0ZTLEVBQUVWLEVBQ0ZVLEVBQUVULFFBVkpVLEVBQU0sQ0FBQ0QsRUFBRVYsRUFBR1UsRUFBRVQsR0FjaEIsT0FEQVEsRUFBT0MsRUFDQUMsRUFHc0JDLENBQU1GLEtBQUlHLFFBQU8sQ0FBQ0MsRUFBR0MsSUFBTUQsRUFBRUUsT0FBT0QsVUFFbkVQLEVBQWFmLEVBQVNKLEtBQUlxQixHQUFLLENBQUNBLEVBQUVWLEVBQUdVLEVBQUVULEtBQUlZLFFBQU8sQ0FBQ0MsRUFBR0MsSUFBTUQsRUFBRUUsT0FBT0QsS0FFdkUsT0FBT1AsRUFNVVMsQ0FBYXhCLEVBQVVjLEdBRXhDLE1BQU1XLEVBQWtCVixFQUFXUSxPQUFPLENBQ3hDVCxFQUFTLEtBQUtkLEVBQVNBLEVBQVNELE9BQVMsR0FBR1EsSUFBTVAsRUFBU0EsRUFBU0QsT0FBUyxHQUFHUSxFQUNoRk0sRUFBTXJCLE9BQVNxQixFQUFNbkIsT0FDckJtQixFQUFNbkIsT0FDTm1CLEVBQU1yQixPQUFTcUIsRUFBTW5CLFNBRXZCLElBQUlXLEVBQUksSUFBSVIsRUFBTWtCLGFBQVlVLG1CQUM5QlgsRUFsR0ssU0FBb0JZLEVBQVFwQixHQUNqQyxJQUFJcUIsRUFBTzNDLEVBQVMsUUFPcEIsR0FOQTJDLEVBQUtDLGFBQWEsSUFBSyxJQUFJdEIsRUFBRVMsV0FBV2MsS0FBSyxRQUM3Q0YsRUFBS0MsYUFBYSxTQUFVdEIsRUFBRXdCLFFBQVUsYUFDeENILEVBQUtDLGFBQWEsZUFBZ0J0QixFQUFFeUIsYUFBZSxHQUNuREosRUFBS0MsYUFBYSxtQkFBb0J0QixFQUFFMEIsaUJBQW1CLFFBQzNETCxFQUFLQyxhQUFhLE9BQVEsUUFDMUJGLEVBQU9PLFlBQVlOLEdBQ2ZyQixFQUFFNEIsS0FBTSxDQUNWLElBQUlDLEVBQVduRCxFQUFTLFFBQ3hCbUQsRUFBU1AsYUFBYSxJQUFLLElBQUl0QixFQUFFbUIsZ0JBQWdCSSxLQUFLLFFBQ3RETSxFQUFTUCxhQUFhLE9BQVF0QixFQUFFNEIsTUFDaENDLEVBQVNQLGFBQWEsZUFBZ0J0QixFQUFFOEIsYUFBZSxNQUN2RFYsRUFBT1csYUFBYUYsRUFBVVIsSUFxRnZCVyxDQUFXNUIsRUFBR0wsR0FuSGxCLFNBQXdCcUIsRUFBUXBCLEdBQ3JDLElBQUlxQixFQUFPM0MsRUFBUyxZQU9wQixHQU5BMkMsRUFBS0MsYUFBYSxTQUFVdEIsRUFBRVMsWUFDOUJZLEVBQUtDLGFBQWEsU0FBVXRCLEVBQUV3QixRQUFVLGFBQ3hDSCxFQUFLQyxhQUFhLGVBQWdCdEIsRUFBRXlCLGFBQWUsR0FDbkRKLEVBQUtDLGFBQWEsbUJBQW9CdEIsRUFBRTBCLGlCQUFtQixRQUMzREwsRUFBS0MsYUFBYSxPQUFRLFFBQzFCRixFQUFPTyxZQUFZTixHQUNmckIsRUFBRTRCLEtBQU0sQ0FDVixJQUFJQyxFQUFXbkQsRUFBUyxZQUN4Qm1ELEVBQVNQLGFBQWEsU0FBVXRCLEVBQUVtQixpQkFDbENVLEVBQVNQLGFBQWEsT0FBUXRCLEVBQUU0QixNQUNoQ0MsRUFBU1AsYUFBYSxlQUFnQnRCLEVBQUU4QixhQUFlLE1BQ3ZEVixFQUFPVyxhQUFhRixFQUFVUixJQXNHSlksQ0FBZTdCLEVBQUdMLEdDckZ0Q21DLENBQWFsQyxFQUFHaEIsS0FBTW9CLEdBQ3RCLE1BQ0YsSUFBSyxPRHNGTixTQUFxQmIsRUFBTWdCLEVBQU9ILEdBQ3ZDLElBQUksU0FBQ1YsRUFBUSxLQUFFdEIsRUFBSSxNQUFFb0IsR0FBU0QsRUFDOUIsTUFBTTRDLEVBQWM1QixFQUFNbkIsT0FBUyxFQUFJbUIsRUFBTW5CLE9BQVMsRUFDaERnRCxFQUFVaEUsRUFBS3FCLFNBQVdELEVBQzFCNkMsRUFBV0QsR0FDWDdCLEVBQU10QixNQUFRTyxFQUFRMkMsR0FBZTNDLEVBQ3RDRSxHQUFZQSxFQUFTRCxRQUFVLEVBQUlwQixLQUFLSSxJQUFJLEVBQUdpQixFQUFTLEdBQUdPLEVBQUlQLEVBQVMsR0FBR08sRUFBSWtDLEdBQWUsRUFFbkcsR0FBSUUsRUFBVyxFQUNiLE1BQU0sSUFBSUMsTUFBTSxnRUFHbEI1QyxFQUFTWSxTQUFRLENBQUNLLEVBQUdYLEtBQ25CLE1BQU1DLEVBQUltQyxFQUFVL0QsS0FBS2tFLE1BQU1GLEVBQVdGLEdBQWVuQyxFQUFJTyxFQUFNbkIsUUFBVWYsS0FBS2tFLEtBQUs1QixFQUFFVixFQUFJRCxHQUN2RkUsRUFBSTdCLEtBQUtrRSxLQUFLNUIsRUFBRVQsR0FDaEJqQixFQUFRWixLQUFLa0UsS0FBS0YsR0FDbEJuRCxFQUFTYixLQUFLa0UsS0FBS2xFLEtBQUtJLElBQUksRUFBRzhCLEVBQU1yQixPQUFTeUIsRUFBRVQsSUFDaERzQyxFQUFNcEUsRUFBSzRCLElBckdkLFNBQW9Cb0IsRUFBUXBCLEdBQUcsRUFBQ0MsRUFBQyxFQUFFQyxFQUFDLE1BQUVqQixFQUFLLE9BQUVDLEVBQU0sSUFBRXNELElBQzFELElBQUlDLEVBQU8vRCxFQUFTLFFBQ3BCK0QsRUFBS25CLGFBQWEsSUFBS3JCLEdBQ3ZCd0MsRUFBS25CLGFBQWEsSUFBS3BCLEdBQ3ZCdUMsRUFBS25CLGFBQWEsUUFBU3JDLEdBQzNCd0QsRUFBS25CLGFBQWEsU0FBVXBDLEdBQzVCdUQsRUFBS25CLGFBQWEsTUFBT2tCLEdBQ3pCQyxFQUFLbkIsYUFBYSxPQUFRdEIsRUFBRTRCLE1BQVEsV0FDcENSLEVBQU9PLFlBQVljLEdBOEZqQkMsQ0FBV3RDLEVBQUdiLEVBQU0sQ0FBQ1UsSUFBR0MsSUFBR2pCLFFBQU9DLFNBQVFzRCxXQ3ZHcENHLENBQVkzQyxFQUFHaEIsS0FBTW9CLE9BT3BCQSxFQUdULFVBQVV3QyxFQUFTLElBQ2pCLElBQUksTUFBQzNELEVBQVEsSUFBRyxPQUFFQyxFQUFTLEdBQUUsT0FBRUcsRUFBTSxJQUFFWixFQUFHLElBQUVILEVBQUcsT0FBRWMsRUFBUyxHQUFLd0QsRUFNL0QsR0FMQTVELEtBQUtDLE1BQVFBLEVBQ2JELEtBQUtFLE9BQVNBLEVBQ2RGLEtBQUtQLElBQU1BLEVBQ1hPLEtBQUtWLElBQU1BLEVBQ1hVLEtBQUtJLE9BQVNBLEdBQ1RDLEVBQ0gsTUFBTSxJQUFJaUQsTUFBTSxtQ0FFYnRELEtBQUtHLEtBT1JILEtBQUtHLElBQUkwRCxVQUFZLEdBQ3JCN0QsS0FBS0csSUFBSXdDLFlBQVkzQyxLQUFLOEQsV0FBV3pELE1BUHJDTCxLQUFLRyxJQUFNVCxFQUFTLE9BQ3BCTSxLQUFLRyxJQUFJbUMsYUFBYSxVQUFXLE9BQU9yQyxLQUFTQyxLQUNqREYsS0FBS0csSUFBSW1DLGFBQWEsUUFBUyxTQUFTckMsZUFBbUJDLE9BQzNERixLQUFLRyxJQUFJd0MsWUFBWTNDLEtBQUs4RCxXQUFXekQsSUFDckNMLEtBQUtELElBQUk0QyxZQUFZM0MsS0FBS0csT0FRaEMsWUM3RUk0RCxFQUEyQixHQUcvQixTQUFTQyxFQUFvQkMsR0FFNUIsR0FBR0YsRUFBeUJFLEdBQzNCLE9BQU9GLEVBQXlCRSxHQUFVbkYsUUFHM0MsSUFBSUMsRUFBU2dGLEVBQXlCRSxHQUFZLENBR2pEbkYsUUFBUyxJQU9WLE9BSEFvRixFQUFvQkQsR0FBVWxGLEVBQVFBLEVBQU9ELFFBQVNrRixHQUcvQ2pGLEVBQU9ELFFDakJmLE9DRkFrRixFQUFvQmpELEVBQUksQ0FBQ2pDLEVBQVNxRixLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hILEVBQW9CSyxFQUFFRixFQUFZQyxLQUFTSixFQUFvQkssRUFBRXZGLEVBQVNzRixJQUM1RUUsT0FBT0MsZUFBZXpGLEVBQVNzRixFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsTUNKM0VKLEVBQW9CSyxFQUFJLENBQUNLLEVBQUtDLElBQVNMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEdDQ2pGWCxFQUFvQmUsRUFBS2pHLElBQ0gsb0JBQVhrRyxRQUEwQkEsT0FBT0MsYUFDMUNYLE9BQU9DLGVBQWV6RixFQUFTa0csT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEWixPQUFPQyxlQUFlekYsRUFBUyxhQUFjLENBQUVvRyxPQUFPLEtIRmhEbEIsRUFBb0IsTSIsImZpbGUiOiJzbWFsbGNoYXJ0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wic21hbGxjaGFydFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJzbWFsbGNoYXJ0XCJdID0gZmFjdG9yeSgpO1xufSkoc2VsZiwgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiZXhwb3J0IGZ1bmN0aW9uIGFycmF5TWluKGRhdGEpIHtcbiAgcmV0dXJuIE1hdGgubWluLmFwcGx5KE1hdGgsIGRhdGEpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcnJheU1heChkYXRhKSB7XG4gIHJldHVybiBNYXRoLm1heC5hcHBseShNYXRoLCBkYXRhKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTnModHlwZSkge1xuICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgdHlwZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZFBvbHlsaW5lKHBhcmVudCwgaSkge1xuICBsZXQgcGF0aCA9IGNyZWF0ZU5zKCdwb2x5bGluZScpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdwb2ludHMnLCBpLnBvaW50c1BhdGgpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2UnLCBpLnN0cm9rZSB8fCAnc2xhdGVncmF5JylcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsIGkuc3Ryb2tlV2lkdGggfHwgMilcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNoYXJyYXknLCBpLnN0cm9rZURhc2hhcnJheSB8fCAnbm9uZScpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdmaWxsJywgJ25vbmUnKVxuICBwYXJlbnQuYXBwZW5kQ2hpbGQocGF0aClcbiAgaWYgKGkuZmlsbCkge1xuICAgIGxldCBmaWxsUGF0aCA9IGNyZWF0ZU5zKCdwb2x5bGluZScpXG4gICAgZmlsbFBhdGguc2V0QXR0cmlidXRlKCdwb2ludHMnLCBpLmNsb3NlUG9pbnRzUGF0aClcbiAgICBmaWxsUGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCBpLmZpbGwpXG4gICAgZmlsbFBhdGguc2V0QXR0cmlidXRlKCdmaWxsLW9wYWNpdHknLCBpLmZpbGxPcGFjaXR5IHx8ICcuMicpXG4gICAgcGFyZW50Lmluc2VydEJlZm9yZShmaWxsUGF0aCwgcGF0aClcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwZW5kUGF0aChwYXJlbnQsIGkpIHtcbiAgbGV0IHBhdGggPSBjcmVhdGVOcygncGF0aCcpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdkJywgYE0ke2kucG9pbnRzUGF0aC5qb2luKCcgJyl9YClcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsIGkuc3Ryb2tlIHx8ICdzbGF0ZWdyYXknKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgaS5zdHJva2VXaWR0aCB8fCAyKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWRhc2hhcnJheScsIGkuc3Ryb2tlRGFzaGFycmF5IHx8ICdub25lJylcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnbm9uZScpXG4gIHBhcmVudC5hcHBlbmRDaGlsZChwYXRoKVxuICBpZiAoaS5maWxsKSB7XG4gICAgbGV0IGZpbGxQYXRoID0gY3JlYXRlTnMoJ3BhdGgnKVxuICAgIGZpbGxQYXRoLnNldEF0dHJpYnV0ZSgnZCcsIGBNJHtpLmNsb3NlUG9pbnRzUGF0aC5qb2luKCcgJyl9YClcbiAgICBmaWxsUGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCBpLmZpbGwpXG4gICAgZmlsbFBhdGguc2V0QXR0cmlidXRlKCdmaWxsLW9wYWNpdHknLCBpLmZpbGxPcGFjaXR5IHx8ICcuMicpXG4gICAgcGFyZW50Lmluc2VydEJlZm9yZShmaWxsUGF0aCwgcGF0aClcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwZW5kUmVjdChwYXJlbnQsIGksIHt4LCB5LCB3aWR0aCwgaGVpZ2h0LCBudW19KSB7XG4gIGxldCByZWN0ID0gY3JlYXRlTnMoJ3JlY3QnKVxuICByZWN0LnNldEF0dHJpYnV0ZSgneCcsIHgpXG4gIHJlY3Quc2V0QXR0cmlidXRlKCd5JywgeSlcbiAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgd2lkdGgpXG4gIHJlY3Quc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBoZWlnaHQpXG4gIHJlY3Quc2V0QXR0cmlidXRlKCdudW0nLCBudW0pXG4gIHJlY3Quc2V0QXR0cmlidXRlKCdmaWxsJywgaS5maWxsIHx8ICcjNDA5RUZGJylcbiAgcGFyZW50LmFwcGVuZENoaWxkKHJlY3QpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkYXRhVG9Qb2ludHMoXG4gIHtcbiAgICBkYXRhLFxuICAgIGxpbWl0LFxuICAgIHdpZHRoID0gMSxcbiAgICBoZWlnaHQgPSAxLFxuICAgIG1heCA9IGFycmF5TWF4KGRhdGEpLFxuICAgIG1pbiA9IGFycmF5TWluKGRhdGEpLFxuICAgIG1hcmdpblxuICB9XG4pIHtcbiAgY29uc3QgbGVuID0gZGF0YS5sZW5ndGhcblxuICBpZiAobGltaXQgJiYgbGltaXQgPCBsZW4pIHtcbiAgICBkYXRhID0gZGF0YS5zbGljZShsZW4gLSBsaW1pdClcbiAgfVxuXG4gIGNvbnN0IGggPSAoaGVpZ2h0IC0gbWFyZ2luICogMikgLyAoKG1heCAtIG1pbikgfHwgMilcbiAgY29uc3QgdyA9ICh3aWR0aCAtIG1hcmdpbiAqIDIpIC8gKChsaW1pdCB8fCBsZW4pIC0gKGxlbiA+IDEgPyAxIDogMCkpXG5cbiAgcmV0dXJuIGRhdGEubWFwKChkLCBpKSA9PiAoe1xuICAgIHg6IGkgKiB3ICsgbWFyZ2luLFxuICAgIHk6IChtYXggPT09IG1pbiA/IDEgOiAobWF4IC0gZCkpICogaCArIG1hcmdpblxuICB9KSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBvaW50c1RvUGF0aChwb2ludEFyciwgc21vb3RoKSB7XG4gIGxldCBwb2ludHNQYXRoXG4gIGlmIChzbW9vdGgpIHtcbiAgICBsZXQgcHJldlxuXG4gICAgZnVuY3Rpb24gY3VydmUocCkge1xuICAgICAgbGV0IHJlc1xuICAgICAgaWYgKCFwcmV2KSB7XG4gICAgICAgIHJlcyA9IFtwLngsIHAueV1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGxlbiA9IChwLnggLSBwcmV2LngpICogMC41XG4gICAgICAgIHJlcyA9IFtcbiAgICAgICAgICAnQycsXG4gICAgICAgICAgcHJldi54ICsgbGVuLFxuICAgICAgICAgIHByZXYueSxcbiAgICAgICAgICBwLnggLSBsZW4sXG4gICAgICAgICAgcC55LFxuICAgICAgICAgIHAueCxcbiAgICAgICAgICBwLnlcbiAgICAgICAgXVxuICAgICAgfVxuICAgICAgcHJldiA9IHBcbiAgICAgIHJldHVybiByZXNcbiAgICB9XG5cbiAgICBwb2ludHNQYXRoID0gcG9pbnRBcnIubWFwKHAgPT4gY3VydmUocCkpLnJlZHVjZSgoYSwgYikgPT4gYS5jb25jYXQoYikpXG4gIH0gZWxzZSB7XG4gICAgcG9pbnRzUGF0aCA9IHBvaW50QXJyLm1hcChwID0+IFtwLngsIHAueV0pLnJlZHVjZSgoYSwgYikgPT4gYS5jb25jYXQoYikpXG4gIH1cbiAgcmV0dXJuIHBvaW50c1BhdGhcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYWxMaW5lRGF0YShpdGVtLCBfdGhpcywgZykge1xuICBsZXQge3BvaW50QXJyLCBzbW9vdGh9ID0gaXRlbVxuICAvLyDlsZXnpLrnmoTot6/lvoRcbiAgbGV0IHBvaW50c1BhdGggPSBwb2ludHNUb1BhdGgocG9pbnRBcnIsIHNtb290aClcbiAgLy8g6Zet5ZCI6Lev5b6E5L2c5Li65bGV56S66Zi05b2xXG4gIGNvbnN0IGNsb3NlUG9pbnRzUGF0aCA9IHBvaW50c1BhdGguY29uY2F0KFtcbiAgICBzbW9vdGggPyBgTCAke3BvaW50QXJyW3BvaW50QXJyLmxlbmd0aCAtIDFdLnh9YCA6IHBvaW50QXJyW3BvaW50QXJyLmxlbmd0aCAtIDFdLngsXG4gICAgX3RoaXMuaGVpZ2h0IC0gX3RoaXMubWFyZ2luLFxuICAgIF90aGlzLm1hcmdpbixcbiAgICBfdGhpcy5oZWlnaHQgLSBfdGhpcy5tYXJnaW4sXG4gIF0pXG4gIGxldCBkID0gey4uLml0ZW0sIHBvaW50c1BhdGgsIGNsb3NlUG9pbnRzUGF0aH1cbiAgc21vb3RoID8gYXBwZW5kUGF0aChnLCBkKSA6IGFwcGVuZFBvbHlsaW5lKGcsIGQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWFsQmFyRGF0YShpdGVtLCBfdGhpcywgZykge1xuICBsZXQge3BvaW50QXJyLCBkYXRhLCBsaW1pdH0gPSBpdGVtXG4gIGNvbnN0IG1hcmdpbldpZHRoID0gX3RoaXMubWFyZ2luID8gMiAqIF90aGlzLm1hcmdpbiA6IDBcbiAgY29uc3Qgbm9MaW1pdCA9IGRhdGEubGVuZ3RoID09PSBsaW1pdFxuICBjb25zdCBiYXJXaWR0aCA9IG5vTGltaXRcbiAgICA/ICgoX3RoaXMud2lkdGggLSBsaW1pdCAqIG1hcmdpbldpZHRoKSAvIGxpbWl0KVxuICAgIDogKHBvaW50QXJyICYmIHBvaW50QXJyLmxlbmd0aCA+PSAyID8gTWF0aC5tYXgoMCwgcG9pbnRBcnJbMV0ueCAtIHBvaW50QXJyWzBdLnggLSBtYXJnaW5XaWR0aCkgOiAwKVxuXG4gIGlmIChiYXJXaWR0aCA8IDEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RvbyBtdWNoIGRhdGEsIHBsZWFzZSBlbmxhcmdlIHRoZSB3aWR0aCBvciByZWR1Y2UgdGhlIG1hcmdpbicpXG4gIH1cblxuICBwb2ludEFyci5mb3JFYWNoKChwLCBpKSA9PiB7XG4gICAgY29uc3QgeCA9IG5vTGltaXQgPyBNYXRoLmNlaWwoKGJhcldpZHRoICsgbWFyZ2luV2lkdGgpICogaSArIF90aGlzLm1hcmdpbikgOiBNYXRoLmNlaWwocC54ICogaSlcbiAgICBjb25zdCB5ID0gTWF0aC5jZWlsKHAueSlcbiAgICBjb25zdCB3aWR0aCA9IE1hdGguY2VpbChiYXJXaWR0aClcbiAgICBjb25zdCBoZWlnaHQgPSBNYXRoLmNlaWwoTWF0aC5tYXgoMCwgX3RoaXMuaGVpZ2h0IC0gcC55KSlcbiAgICBjb25zdCBudW0gPSBkYXRhW2ldXG4gICAgYXBwZW5kUmVjdChnLCBpdGVtLCB7eCwgeSwgd2lkdGgsIGhlaWdodCwgbnVtfSlcbiAgfSlcbn1cbiIsImltcG9ydCB7ZGF0YVRvUG9pbnRzLCBjcmVhdGVOcywgZGVhbExpbmVEYXRhLCBkZWFsQmFyRGF0YX0gZnJvbSAnLi91dGlscy91dGlsJ1xuXG5jbGFzcyBTbWFsbENoYXJ0IHtcbiAgY29uc3RydWN0b3IoZG9tKSB7XG4gICAgdGhpcy5kb20gPSBkb21cbiAgICB0aGlzLndpZHRoID0gJydcbiAgICB0aGlzLmhlaWdodCA9ICcnXG4gICAgdGhpcy5zdmcgPSAnJ1xuICAgIHRoaXMubWF4ID0gJydcbiAgICB0aGlzLm1pbiA9ICcnXG4gICAgdGhpcy5tYXJnaW4gPSAnJ1xuICB9XG5cbiAgc3RhdGljIGluaXQoZG9tKSB7XG4gICAgcmV0dXJuIG5ldyBTbWFsbENoYXJ0KGRvbSlcbiAgfVxuXG4gIGRlYWxTZXJpZXMoc2VyaWVzKSB7XG4gICAgcmV0dXJuIHNlcmllcy5tYXAoKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZGF0YSxcbiAgICAgICAgbGltaXQgPSBkYXRhLmxlbmd0aFxuICAgICAgfSA9IGl0ZW1cbiAgICAgIGNvbnN0IHBvaW50QXJyID0gZGF0YVRvUG9pbnRzKHtcbiAgICAgICAgZGF0YSxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxuICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxuICAgICAgICBtYXg6IHRoaXMubWF4LFxuICAgICAgICBtaW46IHRoaXMubWluLFxuICAgICAgICBtYXJnaW46IHRoaXMubWFyZ2luXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHsuLi5pdGVtLCBsaW1pdCwgcG9pbnRBcnJ9XG4gICAgfSlcbiAgfVxuXG4gIGNyZWF0ZVBhdGgoc2VyaWVzKSB7XG4gICAgY29uc3QgZyA9IGNyZWF0ZU5zKCdnJylcbiAgICBsZXQgZGF0YSA9IHRoaXMuZGVhbFNlcmllcyhzZXJpZXMpXG4gICAgZGF0YS5mb3JFYWNoKChpKSA9PiB7XG4gICAgICBzd2l0Y2ggKGkudHlwZSkge1xuICAgICAgICBjYXNlICdsaW5lJzpcbiAgICAgICAgICBkZWFsTGluZURhdGEoaSwgdGhpcywgZylcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdiYXInOlxuICAgICAgICAgIGRlYWxCYXJEYXRhKGksIHRoaXMsIGcpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAncGllJzpcbiAgICAgICAgICAvLyBhcHBlbmRQb2x5bGluZShnLCBpKVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gZ1xuICB9XG5cbiAgc2V0T3B0aW9uKG9wdGlvbiA9IHt9KSB7XG4gICAgbGV0IHt3aWR0aCA9IDEwMCwgaGVpZ2h0ID0gMzAsIHNlcmllcywgbWF4LCBtaW4sIG1hcmdpbiA9IDJ9ID0gb3B0aW9uXG4gICAgdGhpcy53aWR0aCA9IHdpZHRoXG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHRcbiAgICB0aGlzLm1heCA9IG1heFxuICAgIHRoaXMubWluID0gbWluXG4gICAgdGhpcy5tYXJnaW4gPSBtYXJnaW5cbiAgICBpZiAoIXNlcmllcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2Ugb3B0aW9uIG11c3QgaGF2ZSBzZXJpZXMhJylcbiAgICB9XG4gICAgaWYgKCF0aGlzLnN2Zykge1xuICAgICAgdGhpcy5zdmcgPSBjcmVhdGVOcygnc3ZnJylcbiAgICAgIHRoaXMuc3ZnLnNldEF0dHJpYnV0ZSgndmlld0JveCcsIGAwIDAgJHt3aWR0aH0gJHtoZWlnaHR9YClcbiAgICAgIHRoaXMuc3ZnLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgd2lkdGg6JHt3aWR0aH1weDsgaGVpZ2h0OiR7aGVpZ2h0fXB4YClcbiAgICAgIHRoaXMuc3ZnLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlUGF0aChzZXJpZXMpKVxuICAgICAgdGhpcy5kb20uYXBwZW5kQ2hpbGQodGhpcy5zdmcpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3ZnLmlubmVySFRNTCA9ICcnXG4gICAgICB0aGlzLnN2Zy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVBhdGgoc2VyaWVzKSlcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU21hbGxDaGFydFxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBtb2R1bGUgZXhwb3J0cyBtdXN0IGJlIHJldHVybmVkIGZyb20gcnVudGltZSBzbyBlbnRyeSBpbmxpbmluZyBpcyBkaXNhYmxlZFxuLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG5yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygxNTUpO1xuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiXSwic291cmNlUm9vdCI6IiJ9
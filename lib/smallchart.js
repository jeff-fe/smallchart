!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.smallchart=e():t.smallchart=e()}(self,(function(){return(()=>{"use strict";var t={155:(t,e,i)=>{function r(t){return Math.min.apply(Math,t)}function s(t){return Math.max.apply(Math,t)}function n(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}i.r(e),i.d(e,{default:()=>o});class a{constructor(t){this.dom=t,this.width="",this.height="",this.svg="",this.max="",this.min="",this.margin=""}static init(t){return new a(t)}dealSeries(t){return t.map((t=>{const{data:e,limit:i=e.length}=t,n=function({data:t,limit:e,width:i=1,height:n=1,max:a=s(t),min:o=r(t),margin:h}){const l=t.length;e&&e<l&&(t=t.slice(l-e));const c=(n-2*h)/(a-o||2),u=(i-2*h)/((e||l)-(l>1?1:0));return t.map(((t,e)=>({x:e*u+h,y:(a===o?1:a-t)*c+h})))}({data:e,limit:i,width:this.width,height:this.height,max:this.max,min:this.min,margin:this.margin});return{...t,limit:i,pointArr:n}}))}createPath(t){const e=n("g");return this.dealSeries(t).forEach((t=>{switch(t.type){case"line":!function(t,e,i){let{pointArr:r,smooth:s}=t,a=function(t,e){let i;if(e){let e;i=t.map((t=>function(t){let i;if(e){const r=.5*(t.x-e.x);i=["C",e.x+r,e.y,t.x-r,t.y,t.x,t.y]}else i=[t.x,t.y];return e=t,i}(t))).reduce(((t,e)=>t.concat(e)))}else i=t.map((t=>[t.x,t.y])).reduce(((t,e)=>t.concat(e)));return i}(r,s);const o=a.concat([s?`L ${r[r.length-1].x}`:r[r.length-1].x,e.height-e.margin,e.margin,e.height-e.margin]);let h={...t,pointsPath:a,closePointsPath:o};s?function(t,e){let i=n("path");if(i.setAttribute("d",`M${e.pointsPath.join(" ")}`),i.setAttribute("stroke",e.stroke||"slategray"),i.setAttribute("stroke-width",e.strokeWidth||2),i.setAttribute("stroke-dasharray",e.strokeDasharray||"none"),i.setAttribute("fill","none"),t.appendChild(i),e.fill){let r=n("path");r.setAttribute("d",`M${e.closePointsPath.join(" ")}`),r.setAttribute("fill",e.fill),r.setAttribute("fill-opacity",e.fillOpacity||".2"),t.insertBefore(r,i)}}(i,h):function(t,e){let i=n("polyline");if(i.setAttribute("points",e.pointsPath),i.setAttribute("stroke",e.stroke||"slategray"),i.setAttribute("stroke-width",e.strokeWidth||2),i.setAttribute("stroke-dasharray",e.strokeDasharray||"none"),i.setAttribute("fill","none"),t.appendChild(i),e.fill){let r=n("polyline");r.setAttribute("points",e.closePointsPath),r.setAttribute("fill",e.fill),r.setAttribute("fill-opacity",e.fillOpacity||".2"),t.insertBefore(r,i)}}(i,h)}(t,this,e);break;case"bar":!function(t,e,i){let{pointArr:r,data:s,limit:a}=t;const o=e.margin?2*e.margin:0,h=s.length===a,l=h?(e.width-a*o)/a:r&&r.length>=2?Math.max(0,r[1].x-r[0].x-o):0;if(l<1)throw new Error("Too much data, please enlarge the width or reduce the margin");r.forEach(((r,a)=>{const c=h?Math.ceil((l+o)*a+e.margin):Math.ceil(r.x*a),u=Math.ceil(r.y),p=Math.ceil(l),d=Math.ceil(Math.max(0,e.height-r.y)),m=s[a];!function(t,e,{x:i,y:r,width:s,height:a,num:o}){let h=n("rect");h.setAttribute("x",i),h.setAttribute("y",r),h.setAttribute("width",s),h.setAttribute("height",a),h.setAttribute("num",o),h.setAttribute("fill",e.fill||"#409EFF"),t.appendChild(h)}(i,t,{x:c,y:u,width:p,height:d,num:m})}))}(t,this,e)}t.markLine&&t.markLine.type&&function(t,e){const{markLine:i,pointArr:a}=t;let{type:o="average",stroke:h="#d14",strokeOpacity:l=1,strokeDasharray:c="2,2"}=i;const u=a.map((t=>t.y));let p="";switch(o){case"min":p=s(u);break;case"max":p=r(u);break;case"average":p=(d=u).reduce(((t,e)=>t+e))/d.length;break;case"median":p=function(t){return t.sort(((t,e)=>t-e))[Math.floor(t.length/2)]}(u)}var d;let m=n("line");m.setAttribute("shape-rendering","crispEdges"),m.setAttribute("stroke",h),m.setAttribute("stroke-opacity",l),m.setAttribute("stroke-dasharray",c),m.setAttribute("x1",a[0].x),m.setAttribute("y1",p),m.setAttribute("x2",a[a.length-1].x),m.setAttribute("y2",p),e.appendChild(m)}(t,e)})),e}setOption(t={}){let{width:e=100,height:i=30,series:r,max:s,min:a,margin:o=2}=t;if(this.width=e,this.height=i,this.max=s,this.min=a,this.margin=o,!r)throw new Error("Please option must have series!");this.svg?(this.svg.innerHTML="",this.svg.appendChild(this.createPath(r))):(this.svg=n("svg"),this.svg.setAttribute("viewBox",`0 0 ${e} ${i}`),this.svg.setAttribute("style",`width:${e}px; height:${i}px`),this.svg.appendChild(this.createPath(r)),this.dom.appendChild(this.svg))}}const o=a}},e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={exports:{}};return t[r](s,s.exports,i),s.exports}return i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(155)})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFsbGNoYXJ0L3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9zbWFsbGNoYXJ0Ly4vc3JjL3V0aWxzL3V0aWwuanMiLCJ3ZWJwYWNrOi8vc21hbGxjaGFydC8uL3NyYy9zbWFsbGNoYXJ0LmpzIiwid2VicGFjazovL3NtYWxsY2hhcnQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc21hbGxjaGFydC93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vc21hbGxjaGFydC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vc21hbGxjaGFydC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3NtYWxsY2hhcnQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwiYXJyYXlNaW4iLCJkYXRhIiwiTWF0aCIsIm1pbiIsImFwcGx5IiwiYXJyYXlNYXgiLCJtYXgiLCJjcmVhdGVOcyIsInR5cGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnROUyIsIlNtYWxsQ2hhcnQiLCJkb20iLCJ0aGlzIiwid2lkdGgiLCJoZWlnaHQiLCJzdmciLCJtYXJnaW4iLCJzZXJpZXMiLCJtYXAiLCJpdGVtIiwibGltaXQiLCJsZW5ndGgiLCJwb2ludEFyciIsImxlbiIsInNsaWNlIiwiaCIsInciLCJkIiwiaSIsIngiLCJ5IiwiZGF0YVRvUG9pbnRzIiwiZyIsImRlYWxTZXJpZXMiLCJmb3JFYWNoIiwiX3RoaXMiLCJzbW9vdGgiLCJwb2ludHNQYXRoIiwicHJldiIsInAiLCJyZXMiLCJjdXJ2ZSIsInJlZHVjZSIsImEiLCJiIiwiY29uY2F0IiwicG9pbnRzVG9QYXRoIiwiY2xvc2VQb2ludHNQYXRoIiwicGFyZW50IiwicGF0aCIsInNldEF0dHJpYnV0ZSIsImpvaW4iLCJzdHJva2UiLCJzdHJva2VXaWR0aCIsInN0cm9rZURhc2hhcnJheSIsImFwcGVuZENoaWxkIiwiZmlsbCIsImZpbGxQYXRoIiwiZmlsbE9wYWNpdHkiLCJpbnNlcnRCZWZvcmUiLCJhcHBlbmRQYXRoIiwiYXBwZW5kUG9seWxpbmUiLCJkZWFsTGluZURhdGEiLCJtYXJnaW5XaWR0aCIsIm5vTGltaXQiLCJiYXJXaWR0aCIsIkVycm9yIiwiY2VpbCIsIm51bSIsInJlY3QiLCJhcHBlbmRSZWN0IiwiZGVhbEJhckRhdGEiLCJtYXJrTGluZSIsInN0cm9rZU9wYWNpdHkiLCJ5UG9pbnRzIiwic29ydCIsImZsb29yIiwibWVkaWFuIiwiZGVhbE1hcmtMaW5lIiwib3B0aW9uIiwiaW5uZXJIVE1MIiwiY3JlYXRlUGF0aCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBMkNBLEVBQU1DLEdBQzFCLGlCQUFaQyxTQUEwQyxpQkFBWEMsT0FDeENBLE9BQU9ELFFBQVVELElBQ1EsbUJBQVhHLFFBQXlCQSxPQUFPQyxJQUM5Q0QsT0FBTyxHQUFJSCxHQUNlLGlCQUFaQyxRQUNkQSxRQUFvQixXQUFJRCxJQUV4QkQsRUFBaUIsV0FBSUMsSUFSdkIsQ0FTR0ssTUFBTSxXQUNULE0sd0NDVk8sU0FBU0MsRUFBU0MsR0FDdkIsT0FBT0MsS0FBS0MsSUFBSUMsTUFBTUYsS0FBTUQsR0FHdkIsU0FBU0ksRUFBU0osR0FDdkIsT0FB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SixFQUFvQkssRUFBRTlGLEVBQVM2RixJQUM1RUUsT0FBT0MsZUFBZWhHLEVBQVM2RixFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsTUNKM0VKLEVBQW9CSyxFQUFJLENBQUNLLEVBQUtDLElBQVNMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEdDQ2pGWCxFQUFvQmUsRUFBS3hHLElBQ0gsb0JBQVh5RyxRQUEwQkEsT0FBT0MsYUFDMUNYLE9BQU9DLGVBQWVoRyxFQUFTeUcsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEWixPQUFPQyxlQUFlaEcsRUFBUyxhQUFjLENBQUUyRyxPQUFPLEtIRmhEbEIsRUFBb0IsTSIsImZpbGUiOiJzbWFsbGNoYXJ0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wic21hbGxjaGFydFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJzbWFsbGNoYXJ0XCJdID0gZmFjdG9yeSgpO1xufSkoc2VsZiwgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiZXhwb3J0IGZ1bmN0aW9uIGFycmF5TWluKGRhdGEpIHtcbiAgcmV0dXJuIE1hdGgubWluLmFwcGx5KE1hdGgsIGRhdGEpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcnJheU1heChkYXRhKSB7XG4gIHJldHVybiBNYXRoLm1heC5hcHBseShNYXRoLCBkYXRhKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWVkaWFuKGRhdGEpIHtcbiAgcmV0dXJuIGRhdGEuc29ydCgoYSwgYikgPT4gYSAtIGIpW01hdGguZmxvb3IoZGF0YS5sZW5ndGggLyAyKV1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGF2ZXJhZ2UoZGF0YSkge1xuICByZXR1cm4gZGF0YS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiKSAvIGRhdGEubGVuZ3RoXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOcyh0eXBlKSB7XG4gIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB0eXBlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwZW5kUG9seWxpbmUocGFyZW50LCBpKSB7XG4gIGxldCBwYXRoID0gY3JlYXRlTnMoJ3BvbHlsaW5lJylcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3BvaW50cycsIGkucG9pbnRzUGF0aClcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsIGkuc3Ryb2tlIHx8ICdzbGF0ZWdyYXknKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgaS5zdHJva2VXaWR0aCB8fCAyKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWRhc2hhcnJheScsIGkuc3Ryb2tlRGFzaGFycmF5IHx8ICdub25lJylcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnbm9uZScpXG4gIHBhcmVudC5hcHBlbmRDaGlsZChwYXRoKVxuICBpZiAoaS5maWxsKSB7XG4gICAgbGV0IGZpbGxQYXRoID0gY3JlYXRlTnMoJ3BvbHlsaW5lJylcbiAgICBmaWxsUGF0aC5zZXRBdHRyaWJ1dGUoJ3BvaW50cycsIGkuY2xvc2VQb2ludHNQYXRoKVxuICAgIGZpbGxQYXRoLnNldEF0dHJpYnV0ZSgnZmlsbCcsIGkuZmlsbClcbiAgICBmaWxsUGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwtb3BhY2l0eScsIGkuZmlsbE9wYWNpdHkgfHwgJy4yJylcbiAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGZpbGxQYXRoLCBwYXRoKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmRQYXRoKHBhcmVudCwgaSkge1xuICBsZXQgcGF0aCA9IGNyZWF0ZU5zKCdwYXRoJylcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCBgTSR7aS5wb2ludHNQYXRoLmpvaW4oJyAnKX1gKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgaS5zdHJva2UgfHwgJ3NsYXRlZ3JheScpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCBpLnN0cm9rZVdpZHRoIHx8IDIpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2UtZGFzaGFycmF5JywgaS5zdHJva2VEYXNoYXJyYXkgfHwgJ25vbmUnKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdub25lJylcbiAgcGFyZW50LmFwcGVuZENoaWxkKHBhdGgpXG4gIGlmIChpLmZpbGwpIHtcbiAgICBsZXQgZmlsbFBhdGggPSBjcmVhdGVOcygncGF0aCcpXG4gICAgZmlsbFBhdGguc2V0QXR0cmlidXRlKCdkJywgYE0ke2kuY2xvc2VQb2ludHNQYXRoLmpvaW4oJyAnKX1gKVxuICAgIGZpbGxQYXRoLnNldEF0dHJpYnV0ZSgnZmlsbCcsIGkuZmlsbClcbiAgICBmaWxsUGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwtb3BhY2l0eScsIGkuZmlsbE9wYWNpdHkgfHwgJy4yJylcbiAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGZpbGxQYXRoLCBwYXRoKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmRSZWN0KHBhcmVudCwgaSwge3gsIHksIHdpZHRoLCBoZWlnaHQsIG51bX0pIHtcbiAgbGV0IHJlY3QgPSBjcmVhdGVOcygncmVjdCcpXG4gIHJlY3Quc2V0QXR0cmlidXRlKCd4JywgeClcbiAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3knLCB5KVxuICByZWN0LnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB3aWR0aClcbiAgcmVjdC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIGhlaWdodClcbiAgcmVjdC5zZXRBdHRyaWJ1dGUoJ251bScsIG51bSlcbiAgcmVjdC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCBpLmZpbGwgfHwgJyM0MDlFRkYnKVxuICBwYXJlbnQuYXBwZW5kQ2hpbGQocmVjdClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRhdGFUb1BvaW50cyhcbiAge1xuICAgIGRhdGEsXG4gICAgbGltaXQsXG4gICAgd2lkdGggPSAxLFxuICAgIGhlaWdodCA9IDEsXG4gICAgbWF4ID0gYXJyYXlNYXgoZGF0YSksXG4gICAgbWluID0gYXJyYXlNaW4oZGF0YSksXG4gICAgbWFyZ2luXG4gIH1cbikge1xuICBjb25zdCBsZW4gPSBkYXRhLmxlbmd0aFxuXG4gIGlmIChsaW1pdCAmJiBsaW1pdCA8IGxlbikge1xuICAgIGRhdGEgPSBkYXRhLnNsaWNlKGxlbiAtIGxpbWl0KVxuICB9XG5cbiAgY29uc3QgaCA9IChoZWlnaHQgLSBtYXJnaW4gKiAyKSAvICgobWF4IC0gbWluKSB8fCAyKVxuICBjb25zdCB3ID0gKHdpZHRoIC0gbWFyZ2luICogMikgLyAoKGxpbWl0IHx8IGxlbikgLSAobGVuID4gMSA/IDEgOiAwKSlcblxuICByZXR1cm4gZGF0YS5tYXAoKGQsIGkpID0+ICh7XG4gICAgeDogaSAqIHcgKyBtYXJnaW4sXG4gICAgeTogKG1heCA9PT0gbWluID8gMSA6IChtYXggLSBkKSkgKiBoICsgbWFyZ2luXG4gIH0pKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcG9pbnRzVG9QYXRoKHBvaW50QXJyLCBzbW9vdGgpIHtcbiAgbGV0IHBvaW50c1BhdGhcbiAgaWYgKHNtb290aCkge1xuICAgIGxldCBwcmV2XG5cbiAgICBmdW5jdGlvbiBjdXJ2ZShwKSB7XG4gICAgICBsZXQgcmVzXG4gICAgICBpZiAoIXByZXYpIHtcbiAgICAgICAgcmVzID0gW3AueCwgcC55XVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbGVuID0gKHAueCAtIHByZXYueCkgKiAwLjVcbiAgICAgICAgcmVzID0gW1xuICAgICAgICAgICdDJyxcbiAgICAgICAgICBwcmV2LnggKyBsZW4sXG4gICAgICAgICAgcHJldi55LFxuICAgICAgICAgIHAueCAtIGxlbixcbiAgICAgICAgICBwLnksXG4gICAgICAgICAgcC54LFxuICAgICAgICAgIHAueVxuICAgICAgICBdXG4gICAgICB9XG4gICAgICBwcmV2ID0gcFxuICAgICAgcmV0dXJuIHJlc1xuICAgIH1cblxuICAgIHBvaW50c1BhdGggPSBwb2ludEFyci5tYXAocCA9PiBjdXJ2ZShwKSkucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSlcbiAgfSBlbHNlIHtcbiAgICBwb2ludHNQYXRoID0gcG9pbnRBcnIubWFwKHAgPT4gW3AueCwgcC55XSkucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSlcbiAgfVxuICByZXR1cm4gcG9pbnRzUGF0aFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVhbExpbmVEYXRhKGl0ZW0sIF90aGlzLCBnKSB7XG4gIGxldCB7cG9pbnRBcnIsIHNtb290aH0gPSBpdGVtXG4gIC8vIOWxleekuueahOi3r+W+hFxuICBsZXQgcG9pbnRzUGF0aCA9IHBvaW50c1RvUGF0aChwb2ludEFyciwgc21vb3RoKVxuICAvLyDpl63lkIjot6/lvoTkvZzkuLrlsZXnpLrpmLTlvbFcbiAgY29uc3QgY2xvc2VQb2ludHNQYXRoID0gcG9pbnRzUGF0aC5jb25jYXQoW1xuICAgIHNtb290aCA/IGBMICR7cG9pbnRBcnJbcG9pbnRBcnIubGVuZ3RoIC0gMV0ueH1gIDogcG9pbnRBcnJbcG9pbnRBcnIubGVuZ3RoIC0gMV0ueCxcbiAgICBfdGhpcy5oZWlnaHQgLSBfdGhpcy5tYXJnaW4sXG4gICAgX3RoaXMubWFyZ2luLFxuICAgIF90aGlzLmhlaWdodCAtIF90aGlzLm1hcmdpbixcbiAgXSlcbiAgbGV0IGQgPSB7Li4uaXRlbSwgcG9pbnRzUGF0aCwgY2xvc2VQb2ludHNQYXRofVxuICBzbW9vdGggPyBhcHBlbmRQYXRoKGcsIGQpIDogYXBwZW5kUG9seWxpbmUoZywgZClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYWxCYXJEYXRhKGl0ZW0sIF90aGlzLCBnKSB7XG4gIGxldCB7cG9pbnRBcnIsIGRhdGEsIGxpbWl0fSA9IGl0ZW1cbiAgY29uc3QgbWFyZ2luV2lkdGggPSBfdGhpcy5tYXJnaW4gPyAyICogX3RoaXMubWFyZ2luIDogMFxuICBjb25zdCBub0xpbWl0ID0gZGF0YS5sZW5ndGggPT09IGxpbWl0XG4gIGNvbnN0IGJhcldpZHRoID0gbm9MaW1pdFxuICAgID8gKChfdGhpcy53aWR0aCAtIGxpbWl0ICogbWFyZ2luV2lkdGgpIC8gbGltaXQpXG4gICAgOiAocG9pbnRBcnIgJiYgcG9pbnRBcnIubGVuZ3RoID49IDIgPyBNYXRoLm1heCgwLCBwb2ludEFyclsxXS54IC0gcG9pbnRBcnJbMF0ueCAtIG1hcmdpbldpZHRoKSA6IDApXG5cbiAgaWYgKGJhcldpZHRoIDwgMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVG9vIG11Y2ggZGF0YSwgcGxlYXNlIGVubGFyZ2UgdGhlIHdpZHRoIG9yIHJlZHVjZSB0aGUgbWFyZ2luJylcbiAgfVxuXG4gIHBvaW50QXJyLmZvckVhY2goKHAsIGkpID0+IHtcbiAgICBjb25zdCB4ID0gbm9MaW1pdCA/IE1hdGguY2VpbCgoYmFyV2lkdGggKyBtYXJnaW5XaWR0aCkgKiBpICsgX3RoaXMubWFyZ2luKSA6IE1hdGguY2VpbChwLnggKiBpKVxuICAgIGNvbnN0IHkgPSBNYXRoLmNlaWwocC55KVxuICAgIGNvbnN0IHdpZHRoID0gTWF0aC5jZWlsKGJhcldpZHRoKVxuICAgIGNvbnN0IGhlaWdodCA9IE1hdGguY2VpbChNYXRoLm1heCgwLCBfdGhpcy5oZWlnaHQgLSBwLnkpKVxuICAgIGNvbnN0IG51bSA9IGRhdGFbaV1cbiAgICBhcHBlbmRSZWN0KGcsIGl0ZW0sIHt4LCB5LCB3aWR0aCwgaGVpZ2h0LCBudW19KVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVhbE1hcmtMaW5lKGl0ZW0sIGcpIHtcbiAgY29uc3Qge21hcmtMaW5lLCBwb2ludEFycn0gPSBpdGVtXG4gIC8qKlxuICAgKiB0eXBlIOWPr+i+k+WFpeeahOWAvFxuICAgKiAgbWluIOacgOWwj+WAvFxuICAgKiAgbWF4IOacgOWkp+WAvFxuICAgKiAgYXZlcmFnZSDlubPlnYflgLxcbiAgICogIG1lZGlhbiDkuK3kvY3mlbBcbiAgICovXG5cbiAgbGV0IHt0eXBlID0gJ2F2ZXJhZ2UnLCBzdHJva2UgPSAnI2QxNCcsIHN0cm9rZU9wYWNpdHkgPSAxLCBzdHJva2VEYXNoYXJyYXkgPSAnMiwyJ30gPSBtYXJrTGluZVxuICBjb25zdCB5UG9pbnRzID0gcG9pbnRBcnIubWFwKHAgPT4gcC55KVxuICBsZXQgeSA9ICcnXG5cbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnbWluJzpcbiAgICAgIHkgPSBhcnJheU1heCh5UG9pbnRzKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdtYXgnOlxuICAgICAgeSA9IGFycmF5TWluKHlQb2ludHMpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2F2ZXJhZ2UnOlxuICAgICAgeSA9IGF2ZXJhZ2UoeVBvaW50cylcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnbWVkaWFuJzpcbiAgICAgIHkgPSBtZWRpYW4oeVBvaW50cylcbiAgICAgIGJyZWFrXG5cbiAgfVxuICBsZXQgcmVjdCA9IGNyZWF0ZU5zKCdsaW5lJylcbiAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3NoYXBlLXJlbmRlcmluZycsICdjcmlzcEVkZ2VzJylcbiAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsIHN0cm9rZSlcbiAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1vcGFjaXR5Jywgc3Ryb2tlT3BhY2l0eSlcbiAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNoYXJyYXknLCBzdHJva2VEYXNoYXJyYXkpXG4gIHJlY3Quc2V0QXR0cmlidXRlKCd4MScsIHBvaW50QXJyWzBdLngpXG4gIHJlY3Quc2V0QXR0cmlidXRlKCd5MScsIHkpXG4gIHJlY3Quc2V0QXR0cmlidXRlKCd4MicsIHBvaW50QXJyW3BvaW50QXJyLmxlbmd0aCAtIDFdLngpXG4gIHJlY3Quc2V0QXR0cmlidXRlKCd5MicsIHkpXG4gIGcuYXBwZW5kQ2hpbGQocmVjdClcbn1cbiIsImltcG9ydCB7ZGF0YVRvUG9pbnRzLCBjcmVhdGVOcywgZGVhbExpbmVEYXRhLCBkZWFsQmFyRGF0YSwgZGVhbE1hcmtMaW5lfSBmcm9tICcuL3V0aWxzL3V0aWwnXG5cbmNsYXNzIFNtYWxsQ2hhcnQge1xuICBjb25zdHJ1Y3Rvcihkb20pIHtcbiAgICB0aGlzLmRvbSA9IGRvbVxuICAgIHRoaXMud2lkdGggPSAnJ1xuICAgIHRoaXMuaGVpZ2h0ID0gJydcbiAgICB0aGlzLnN2ZyA9ICcnXG4gICAgdGhpcy5tYXggPSAnJ1xuICAgIHRoaXMubWluID0gJydcbiAgICB0aGlzLm1hcmdpbiA9ICcnXG4gIH1cblxuICBzdGF0aWMgaW5pdChkb20pIHtcbiAgICByZXR1cm4gbmV3IFNtYWxsQ2hhcnQoZG9tKVxuICB9XG5cbiAgZGVhbFNlcmllcyhzZXJpZXMpIHtcbiAgICByZXR1cm4gc2VyaWVzLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBkYXRhLFxuICAgICAgICBsaW1pdCA9IGRhdGEubGVuZ3RoXG4gICAgICB9ID0gaXRlbVxuICAgICAgY29uc3QgcG9pbnRBcnIgPSBkYXRhVG9Qb2ludHMoe1xuICAgICAgICBkYXRhLFxuICAgICAgICBsaW1pdCxcbiAgICAgICAgd2lkdGg6IHRoaXMud2lkdGgsXG4gICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQsXG4gICAgICAgIG1heDogdGhpcy5tYXgsXG4gICAgICAgIG1pbjogdGhpcy5taW4sXG4gICAgICAgIG1hcmdpbjogdGhpcy5tYXJnaW5cbiAgICAgIH0pXG4gICAgICByZXR1cm4gey4uLml0ZW0sIGxpbWl0LCBwb2ludEFycn1cbiAgICB9KVxuICB9XG5cbiAgY3JlYXRlUGF0aChzZXJpZXMpIHtcbiAgICBjb25zdCBnID0gY3JlYXRlTnMoJ2cnKVxuICAgIGxldCBkYXRhID0gdGhpcy5kZWFsU2VyaWVzKHNlcmllcylcbiAgICBkYXRhLmZvckVhY2goKGkpID0+IHtcbiAgICAgIHN3aXRjaCAoaS50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2xpbmUnOlxuICAgICAgICAgIGRlYWxMaW5lRGF0YShpLCB0aGlzLCBnKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2Jhcic6XG4gICAgICAgICAgZGVhbEJhckRhdGEoaSwgdGhpcywgZylcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdwaWUnOlxuICAgICAgICAgIC8vIGFwcGVuZFBvbHlsaW5lKGcsIGkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGlmIChpLm1hcmtMaW5lICYmIGkubWFya0xpbmUudHlwZSkge1xuICAgICAgICBkZWFsTWFya0xpbmUoaSwgZylcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBnXG4gIH1cblxuICBzZXRPcHRpb24ob3B0aW9uID0ge30pIHtcbiAgICBsZXQge3dpZHRoID0gMTAwLCBoZWlnaHQgPSAzMCwgc2VyaWVzLCBtYXgsIG1pbiwgbWFyZ2luID0gMn0gPSBvcHRpb25cbiAgICB0aGlzLndpZHRoID0gd2lkdGhcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodFxuICAgIHRoaXMubWF4ID0gbWF4XG4gICAgdGhpcy5taW4gPSBtaW5cbiAgICB0aGlzLm1hcmdpbiA9IG1hcmdpblxuICAgIGlmICghc2VyaWVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBvcHRpb24gbXVzdCBoYXZlIHNlcmllcyEnKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuc3ZnKSB7XG4gICAgICB0aGlzLnN2ZyA9IGNyZWF0ZU5zKCdzdmcnKVxuICAgICAgdGhpcy5zdmcuc2V0QXR0cmlidXRlKCd2aWV3Qm94JywgYDAgMCAke3dpZHRofSAke2hlaWdodH1gKVxuICAgICAgdGhpcy5zdmcuc2V0QXR0cmlidXRlKCdzdHlsZScsIGB3aWR0aDoke3dpZHRofXB4OyBoZWlnaHQ6JHtoZWlnaHR9cHhgKVxuICAgICAgdGhpcy5zdmcuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVQYXRoKHNlcmllcykpXG4gICAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZCh0aGlzLnN2ZylcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdmcuaW5uZXJIVE1MID0gJydcbiAgICAgIHRoaXMuc3ZnLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlUGF0aChzZXJpZXMpKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTbWFsbENoYXJ0XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIG1vZHVsZSBleHBvcnRzIG11c3QgYmUgcmV0dXJuZWQgZnJvbSBydW50aW1lIHNvIGVudHJ5IGlubGluaW5nIGlzIGRpc2FibGVkXG4vLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NSk7XG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyJdLCJzb3VyY2VSb290IjoiIn0=
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.smallchart=e():t.smallchart=e()}(self,(function(){return(()=>{"use strict";var t={155:(t,e,i)=>{function s(t){return Math.min.apply(Math,t)}function r(t){return Math.max.apply(Math,t)}function n(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}i.r(e),i.d(e,{default:()=>h});class o{constructor(t){this.dom=t,this.width="",this.height="",this.svg="",this.max="",this.min="",this.margin=""}static init(t){return new o(t)}dealSeries(t){return t.map((t=>{const{data:e,limit:i=e.length,smooth:n}=t,o=function({data:t,limit:e,width:i=1,height:n=1,max:o=r(t),min:h=s(t),margin:a}){const l=t.length;e&&e<l&&(t=t.slice(l-e));const u=(n-2*a)/(o-h||2),c=(i-2*a)/((e||l)-(l>1?1:0));return t.map(((t,e)=>({x:e*c+a,y:(o===h?1:o-t)*u+a})))}({data:e,limit:i,width:this.width,height:this.height,max:this.max,min:this.min,margin:this.margin});let h=function(t,e){let i;if(e){let e;i=t.map((t=>function(t){let i;if(e){const s=.5*(t.x-e.x);i=["C",e.x+s,e.y,t.x-s,t.y,t.x,t.y]}else i=[t.x,t.y];return e=t,i}(t))).reduce(((t,e)=>t.concat(e)))}else i=t.map((t=>[t.x,t.y])).reduce(((t,e)=>t.concat(e)));return i}(o,n);const a=h.concat([n?`L ${o[o.length-1].x}`:o[o.length-1].x,this.height-this.margin,this.margin,this.height-this.margin]);return{...t,pointsPath:h,closePointsPath:a}}))}createPath(t){const e=n("g");return this.dealSeries(t).forEach((t=>{switch(t.type){case"line":t.smooth?function(t,e){let i=n("path");if(i.setAttribute("d",`M${e.pointsPath.join(" ")}`),i.setAttribute("stroke",e.stroke||"slategray"),i.setAttribute("stroke-width",e.strokeWidth||2),i.setAttribute("stroke-dasharray",e.strokeDasharray||"none"),i.setAttribute("fill","none"),t.appendChild(i),e.fill){let s=n("path");s.setAttribute("d",`M${e.closePointsPath.join(" ")}`),s.setAttribute("fill",e.fill),s.setAttribute("fill-opacity",e.fillOpacity||".2"),t.insertBefore(s,i)}}(e,t):function(t,e){let i=n("polyline");if(i.setAttribute("points",e.pointsPath),i.setAttribute("stroke",e.stroke||"slategray"),i.setAttribute("stroke-width",e.strokeWidth||2),i.setAttribute("stroke-dasharray",e.strokeDasharray||"none"),i.setAttribute("fill","none"),t.appendChild(i),e.fill){let s=n("polyline");s.setAttribute("points",e.closePointsPath),s.setAttribute("fill",e.fill),s.setAttribute("fill-opacity",e.fillOpacity||".2"),t.insertBefore(s,i)}}(e,t)}})),e}setOption(t={}){let{width:e=100,height:i=30,series:s,max:r,min:o,margin:h=5}=t;if(this.width=e,this.height=i,this.max=r,this.min=o,this.margin=h,!s)throw new Error("Please option must have series!");this.svg?(this.svg.innerHTML="",this.svg.appendChild(this.createPath(s))):(this.svg=n("svg"),this.svg.setAttribute("viewBox",`0 0 ${e} ${i}`),this.svg.setAttribute("style",`width:${e}px; height:${i}px`),this.svg.appendChild(this.createPath(s)),this.dom.appendChild(this.svg))}}const h=o}},e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={exports:{}};return t[s](r,r.exports,i),r.exports}return i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(155)})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFsbGNoYXJ0L3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9zbWFsbGNoYXJ0Ly4vc3JjL3V0aWxzL3V0aWwuanMiLCJ3ZWJwYWNrOi8vc21hbGxjaGFydC8uL3NyYy9zbWFsbGNoYXJ0LmpzIiwid2VicGFjazovL3NtYWxsY2hhcnQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc21hbGxjaGFydC93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vc21hbGxjaGFydC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vc21hbGxjaGFydC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3NtYWxsY2hhcnQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwiYXJyYXlNaW4iLCJkYXRhIiwiTWF0aCIsIm1pbiIsImFwcGx5IiwiYXJyYXlNYXgiLCJtYXgiLCJjcmVhdGVOcyIsInR5cGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnROUyIsIlNtYWxsQ2hhcnQiLCJkb20iLCJ0aGlzIiwid2lkdGgiLCJoZWlnaHQiLCJzdmciLCJtYXJnaW4iLCJzZXJpZXMiLCJtYXAiLCJpdGVtIiwibGltaXQiLCJsZW5ndGgiLCJzbW9vdGgiLCJwb2ludEFyciIsImxlbiIsInNsaWNlIiwiaCIsInciLCJkIiwiaSIsIngiLCJ5IiwiZGF0YVRvUG9pbnRzIiwicG9pbnRzUGF0aCIsInByZXYiLCJwIiwicmVzIiwiY3VydmUiLCJyZWR1Y2UiLCJhIiwiYiIsImNvbmNhdCIsInBvaW50c1RvUGF0aCIsImNsb3NlUG9pbnRzUGF0aCIsImciLCJkZWFsU2VyaWVzIiwiZm9yRWFjaCIsInBhcmVudCIsInBhdGgiLCJzZXRBdHRyaWJ1dGUiLCJqb2luIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJzdHJva2VEYXNoYXJyYXkiLCJhcHBlbmRDaGlsZCIsImZpbGwiLCJmaWxsUGF0aCIsImZpbGxPcGFjaXR5IiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kUGF0aCIsImFwcGVuZFBvbHlsaW5lIiwib3B0aW9uIiwiRXJyb3IiLCJpbm5lckhUTUwiLCJjcmVhdGVQYXRoIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUEyQ0EsRUFBTUMsR0FDMUIsaUJBQVpDLFNBQTBDLGlCQUFYQyxPQUN4Q0EsT0FBT0QsUUFBVUQsSUFDUSxtQkFBWEcsUUFBeUJBLE9BQU9DLElBQzlDRCxPQUFPLEdBQUlILEdBQ2UsaUJBQVpDLFFBQ2RBLFFBQW9CLFdBQUlELElBRXhCRCxFQUFpQixXQUFJQyxJQVJ2QixDQVNHSyxNQUFNLFdBQ1QsTSx3Q0NWTyxTQUFTQyxFQUFTQyxHQUN2QixPQUFPQyxLQUFLQyxJQUFJQyxNQUFNRixLQUFNRCxHQUd2QixTQUFTSSxFQUFTSixHQUN2QixPQUFPQyxLQUFLSSxJQUFJRixNQUFNRixLQUFNRCxHQUd2QixTQUFTTSxFQUFTQyxHQUN2QixPQUFPQyxTQUFTQyxnQkFBZ0IsNkJBQThCRixHLDhCQ1BoRSxNQUFNRyxFQUNKLFlBQVlDLEdBQ1ZDLEtBQUtELElBQU1BLEVBQ1hDLEtBQUtDLE1BQVEsR0FDYkQsS0FBS0UsT0FBUyxHQUNkRixLQUFLRyxJQUFNLEdBQ1hILEtB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YWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcInNtYWxsY2hhcnRcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wic21hbGxjaGFydFwiXSA9IGZhY3RvcnkoKTtcbn0pKHNlbGYsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsImV4cG9ydCBmdW5jdGlvbiBhcnJheU1pbihkYXRhKSB7XG4gIHJldHVybiBNYXRoLm1pbi5hcHBseShNYXRoLCBkYXRhKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlNYXgoZGF0YSkge1xuICByZXR1cm4gTWF0aC5tYXguYXBwbHkoTWF0aCwgZGF0YSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU5zKHR5cGUpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHR5cGUpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmRQb2x5bGluZShwYXJlbnQsIGkpIHtcbiAgbGV0IHBhdGggPSBjcmVhdGVOcygncG9seWxpbmUnKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgncG9pbnRzJywgaS5wb2ludHNQYXRoKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgaS5zdHJva2UgfHwgJ3NsYXRlZ3JheScpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCBpLnN0cm9rZVdpZHRoIHx8IDIpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2UtZGFzaGFycmF5JywgaS5zdHJva2VEYXNoYXJyYXkgfHwgJ25vbmUnKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdub25lJylcbiAgcGFyZW50LmFwcGVuZENoaWxkKHBhdGgpXG4gIGlmIChpLmZpbGwpIHtcbiAgICBsZXQgZmlsbFBhdGggPSBjcmVhdGVOcygncG9seWxpbmUnKVxuICAgIGZpbGxQYXRoLnNldEF0dHJpYnV0ZSgncG9pbnRzJywgaS5jbG9zZVBvaW50c1BhdGgpXG4gICAgZmlsbFBhdGguc2V0QXR0cmlidXRlKCdmaWxsJywgaS5maWxsKVxuICAgIGZpbGxQYXRoLnNldEF0dHJpYnV0ZSgnZmlsbC1vcGFjaXR5JywgaS5maWxsT3BhY2l0eSB8fCAnLjInKVxuICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoZmlsbFBhdGgsIHBhdGgpXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZFBhdGgocGFyZW50LCBpKSB7XG4gIGxldCBwYXRoID0gY3JlYXRlTnMoJ3BhdGgnKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgnZCcsIGBNJHtpLnBvaW50c1BhdGguam9pbignICcpfWApXG4gIHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2UnLCBpLnN0cm9rZSB8fCAnc2xhdGVncmF5JylcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsIGkuc3Ryb2tlV2lkdGggfHwgMilcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNoYXJyYXknLCBpLnN0cm9rZURhc2hhcnJheSB8fCAnbm9uZScpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdmaWxsJywgJ25vbmUnKVxuICBwYXJlbnQuYXBwZW5kQ2hpbGQocGF0aClcbiAgaWYgKGkuZmlsbCkge1xuICAgIGxldCBmaWxsUGF0aCA9IGNyZWF0ZU5zKCdwYXRoJylcbiAgICBmaWxsUGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCBgTSR7aS5jbG9zZVBvaW50c1BhdGguam9pbignICcpfWApXG4gICAgZmlsbFBhdGguc2V0QXR0cmlidXRlKCdmaWxsJywgaS5maWxsKVxuICAgIGZpbGxQYXRoLnNldEF0dHJpYnV0ZSgnZmlsbC1vcGFjaXR5JywgaS5maWxsT3BhY2l0eSB8fCAnLjInKVxuICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoZmlsbFBhdGgsIHBhdGgpXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRhdGFUb1BvaW50cyhcbiAge1xuICAgIGRhdGEsXG4gICAgbGltaXQsXG4gICAgd2lkdGggPSAxLFxuICAgIGhlaWdodCA9IDEsXG4gICAgbWF4ID0gYXJyYXlNYXgoZGF0YSksXG4gICAgbWluID0gYXJyYXlNaW4oZGF0YSksXG4gICAgbWFyZ2luXG4gIH1cbikge1xuICBjb25zdCBsZW4gPSBkYXRhLmxlbmd0aFxuXG4gIGlmIChsaW1pdCAmJiBsaW1pdCA8IGxlbikge1xuICAgIGRhdGEgPSBkYXRhLnNsaWNlKGxlbiAtIGxpbWl0KVxuICB9XG5cbiAgY29uc3QgaCA9IChoZWlnaHQgLSBtYXJnaW4gKiAyKSAvICgobWF4IC0gbWluKSB8fCAyKVxuICBjb25zdCB3ID0gKHdpZHRoIC0gbWFyZ2luICogMikgLyAoKGxpbWl0IHx8IGxlbikgLSAobGVuID4gMSA/IDEgOiAwKSlcblxuICByZXR1cm4gZGF0YS5tYXAoKGQsIGkpID0+ICh7XG4gICAgeDogaSAqIHcgKyBtYXJnaW4sXG4gICAgeTogKG1heCA9PT0gbWluID8gMSA6IChtYXggLSBkKSkgKiBoICsgbWFyZ2luXG4gIH0pKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcG9pbnRzVG9QYXRoKHBvaW50QXJyLCBzbW9vdGgpIHtcbiAgbGV0IHBvaW50c1BhdGhcbiAgaWYgKHNtb290aCkge1xuICAgIGxldCBwcmV2XG5cbiAgICBmdW5jdGlvbiBjdXJ2ZShwKSB7XG4gICAgICBsZXQgcmVzXG4gICAgICBpZiAoIXByZXYpIHtcbiAgICAgICAgcmVzID0gW3AueCwgcC55XVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbGVuID0gKHAueCAtIHByZXYueCkgKiAwLjVcbiAgICAgICAgcmVzID0gW1xuICAgICAgICAgICdDJyxcbiAgICAgICAgICBwcmV2LnggKyBsZW4sXG4gICAgICAgICAgcHJldi55LFxuICAgICAgICAgIHAueCAtIGxlbixcbiAgICAgICAgICBwLnksXG4gICAgICAgICAgcC54LFxuICAgICAgICAgIHAueVxuICAgICAgICBdXG4gICAgICB9XG4gICAgICBwcmV2ID0gcFxuICAgICAgcmV0dXJuIHJlc1xuICAgIH1cblxuICAgIHBvaW50c1BhdGggPSBwb2ludEFyci5tYXAocCA9PiBjdXJ2ZShwKSkucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSlcbiAgfSBlbHNlIHtcbiAgICBwb2ludHNQYXRoID0gcG9pbnRBcnIubWFwKHAgPT4gW3AueCwgcC55XSkucmVkdWNlKChhLCBiKSA9PiBhLmNvbmNhdChiKSlcbiAgfVxuICByZXR1cm4gcG9pbnRzUGF0aFxufVxuIiwiaW1wb3J0IHtkYXRhVG9Qb2ludHMsIGNyZWF0ZU5zLCBhcHBlbmRQb2x5bGluZSwgcG9pbnRzVG9QYXRoLCBhcHBlbmRQYXRofSBmcm9tICcuL3V0aWxzL3V0aWwnXG5cbmNsYXNzIFNtYWxsQ2hhcnQge1xuICBjb25zdHJ1Y3Rvcihkb20pIHtcbiAgICB0aGlzLmRvbSA9IGRvbVxuICAgIHRoaXMud2lkdGggPSAnJ1xuICAgIHRoaXMuaGVpZ2h0ID0gJydcbiAgICB0aGlzLnN2ZyA9ICcnXG4gICAgdGhpcy5tYXggPSAnJ1xuICAgIHRoaXMubWluID0gJydcbiAgICB0aGlzLm1hcmdpbiA9ICcnXG4gIH1cblxuICBzdGF0aWMgaW5pdChkb20pIHtcbiAgICByZXR1cm4gbmV3IFNtYWxsQ2hhcnQoZG9tKVxuICB9XG5cbiAgZGVhbFNlcmllcyhzZXJpZXMpIHtcbiAgICByZXR1cm4gc2VyaWVzLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBkYXRhLFxuICAgICAgICBsaW1pdCA9IGRhdGEubGVuZ3RoLFxuICAgICAgICBzbW9vdGggIC8vIOaYr+WQpuS4uuW5s+a7keabsue6v1xuICAgICAgfSA9IGl0ZW1cbiAgICAgIGNvbnN0IHBvaW50QXJyID0gZGF0YVRvUG9pbnRzKHtcbiAgICAgICAgZGF0YSxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxuICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxuICAgICAgICBtYXg6IHRoaXMubWF4LFxuICAgICAgICBtaW46IHRoaXMubWluLFxuICAgICAgICBtYXJnaW46IHRoaXMubWFyZ2luXG4gICAgICB9KVxuICAgICAgLy8g5bGV56S655qE6Lev5b6EXG4gICAgICBsZXQgcG9pbnRzUGF0aCA9IHBvaW50c1RvUGF0aChwb2ludEFyciwgc21vb3RoKVxuICAgICAgLy8g6Zet5ZCI6Lev5b6E5L2c5Li65bGV56S66Zi05b2xXG4gICAgICBjb25zdCBjbG9zZVBvaW50c1BhdGggPSBwb2ludHNQYXRoLmNvbmNhdChbXG4gICAgICAgIHNtb290aCA/IGBMICR7cG9pbnRBcnJbcG9pbnRBcnIubGVuZ3RoIC0gMV0ueH1gIDogcG9pbnRBcnJbcG9pbnRBcnIubGVuZ3RoIC0gMV0ueCxcbiAgICAgICAgdGhpcy5oZWlnaHQgLSB0aGlzLm1hcmdpbixcbiAgICAgICAgdGhpcy5tYXJnaW4sXG4gICAgICAgIHRoaXMuaGVpZ2h0IC0gdGhpcy5tYXJnaW4sXG4gICAgICBdKVxuICAgICAgcmV0dXJuIHsuLi5pdGVtLCBwb2ludHNQYXRoLCBjbG9zZVBvaW50c1BhdGh9XG4gICAgfSlcbiAgfVxuXG4gIGNyZWF0ZVBhdGgoc2VyaWVzKSB7XG4gICAgY29uc3QgZyA9IGNyZWF0ZU5zKCdnJylcbiAgICBsZXQgZGF0YSA9IHRoaXMuZGVhbFNlcmllcyhzZXJpZXMpXG4gICAgZGF0YS5mb3JFYWNoKChpKSA9PiB7XG4gICAgICBzd2l0Y2ggKGkudHlwZSkge1xuICAgICAgICBjYXNlICdsaW5lJzpcbiAgICAgICAgICBpLnNtb290aCA/IGFwcGVuZFBhdGgoZywgaSkgOiBhcHBlbmRQb2x5bGluZShnLCBpKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2Jhcic6XG4gICAgICAgICAgLy8gYXBwZW5kUG9seWxpbmUoZywgaSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdwaWUnOlxuICAgICAgICAgIC8vIGFwcGVuZFBvbHlsaW5lKGcsIGkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBnXG4gIH1cblxuICBzZXRPcHRpb24ob3B0aW9uID0ge30pIHtcbiAgICBsZXQge3dpZHRoID0gMTAwLCBoZWlnaHQgPSAzMCwgc2VyaWVzLCBtYXgsIG1pbiwgbWFyZ2luID0gNX0gPSBvcHRpb25cbiAgICB0aGlzLndpZHRoID0gd2lkdGhcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodFxuICAgIHRoaXMubWF4ID0gbWF4XG4gICAgdGhpcy5taW4gPSBtaW5cbiAgICB0aGlzLm1hcmdpbiA9IG1hcmdpblxuICAgIGlmICghc2VyaWVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBvcHRpb24gbXVzdCBoYXZlIHNlcmllcyEnKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuc3ZnKSB7XG4gICAgICB0aGlzLnN2ZyA9IGNyZWF0ZU5zKCdzdmcnKVxuICAgICAgdGhpcy5zdmcuc2V0QXR0cmlidXRlKCd2aWV3Qm94JywgYDAgMCAke3dpZHRofSAke2hlaWdodH1gKVxuICAgICAgdGhpcy5zdmcuc2V0QXR0cmlidXRlKCdzdHlsZScsIGB3aWR0aDoke3dpZHRofXB4OyBoZWlnaHQ6JHtoZWlnaHR9cHhgKVxuICAgICAgdGhpcy5zdmcuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVQYXRoKHNlcmllcykpXG4gICAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZCh0aGlzLnN2ZylcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdmcuaW5uZXJIVE1MID0gJydcbiAgICAgIHRoaXMuc3ZnLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlUGF0aChzZXJpZXMpKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTbWFsbENoYXJ0XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIG1vZHVsZSBleHBvcnRzIG11c3QgYmUgcmV0dXJuZWQgZnJvbSBydW50aW1lIHNvIGVudHJ5IGlubGluaW5nIGlzIGRpc2FibGVkXG4vLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NSk7XG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyJdLCJzb3VyY2VSb290IjoiIn0=
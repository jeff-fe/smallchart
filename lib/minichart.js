!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.minichart=e():t.minichart=e()}(self,(function(){return(()=>{"use strict";var t={924:(t,e,i)=>{function s(t){return Math.min.apply(Math,t)}function r(t){return Math.max.apply(Math,t)}function n(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}i.r(e),i.d(e,{default:()=>h});class o{constructor(t){this.dom=t,this.width="",this.height="",this.svg="",this.max="",this.min="",this.margin=""}static init(t){return new o(t)}dealSeries(t){return t.map((t=>{const{data:e,limit:i=e.length,smooth:n}=t,o=function({data:t,limit:e,width:i=1,height:n=1,max:o=r(t),min:h=s(t),margin:a}){const l=t.length;e&&e<l&&(t=t.slice(l-e));const u=(n-2*a)/(o-h||2),c=(i-2*a)/((e||l)-(l>1?1:0));return t.map(((t,e)=>({x:e*c+a,y:(o===h?1:o-t)*u+a})))}({data:e,limit:i,width:this.width,height:this.height,max:this.max,min:this.min,margin:this.margin});let h=function(t,e){let i;if(e){let e;i=t.map((t=>function(t){let i;if(e){const s=.5*(t.x-e.x);i=["C",e.x+s,e.y,t.x-s,t.y,t.x,t.y]}else i=[t.x,t.y];return e=t,i}(t))).reduce(((t,e)=>t.concat(e)))}else i=t.map((t=>[t.x,t.y])).reduce(((t,e)=>t.concat(e)));return i}(o,n);const a=h.concat([n?`L ${o[o.length-1].x}`:o[o.length-1].x,this.height-this.margin,this.margin,this.height-this.margin]);return{...t,pointsPath:h,closePointsPath:a}}))}createPath(t){const e=n("g");return this.dealSeries(t).forEach((t=>{switch(t.type){case"line":t.smooth?function(t,e){let i=n("path");if(i.setAttribute("d",`M${e.pointsPath.join(" ")}`),i.setAttribute("stroke",e.stroke||"slategray"),i.setAttribute("stroke-width",e.strokeWidth||2),i.setAttribute("stroke-dasharray",e.strokeDasharray||"none"),i.setAttribute("fill","none"),t.appendChild(i),e.fill){let s=n("path");s.setAttribute("d",`M${e.closePointsPath.join(" ")}`),s.setAttribute("fill",e.fill),s.setAttribute("fill-opacity",e.fillOpacity||".2"),t.insertBefore(s,i)}}(e,t):function(t,e){let i=n("polyline");if(i.setAttribute("points",e.pointsPath),i.setAttribute("stroke",e.stroke||"slategray"),i.setAttribute("stroke-width",e.strokeWidth||2),i.setAttribute("stroke-dasharray",e.strokeDasharray||"none"),i.setAttribute("fill","none"),t.appendChild(i),e.fill){let s=n("polyline");s.setAttribute("points",e.closePointsPath),s.setAttribute("fill",e.fill),s.setAttribute("fill-opacity",e.fillOpacity||".2"),t.insertBefore(s,i)}}(e,t)}})),e}setOption(t={}){let{width:e=100,height:i=30,series:s,max:r,min:o,margin:h=5}=t;if(this.width=e,this.height=i,this.max=r,this.min=o,this.margin=h,!s)throw new Error("Please option must have series!");this.svg?(this.svg.innerHTML="",this.svg.appendChild(this.createPath(s))):(this.svg=n("svg"),this.svg.setAttribute("viewBox",`0 0 ${e} ${i}`),this.svg.setAttribute("style",`width:${e}px; height:${i}px`),this.svg.appendChild(this.createPath(s)),this.dom.appendChild(this.svg))}}const h=o}},e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={exports:{}};return t[s](r,r.exports,i),r.exports}return i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i(924)})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9taW5pY2hhcnQvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL21pbmljaGFydC8uL3NyYy91dGlscy91dGlsLmpzIiwid2VicGFjazovL21pbmljaGFydC8uL3NyYy9taW5pY2hhcnQuanMiLCJ3ZWJwYWNrOi8vbWluaWNoYXJ0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21pbmljaGFydC93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vbWluaWNoYXJ0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9taW5pY2hhcnQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9taW5pY2hhcnQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwiYXJyYXlNaW4iLCJkYXRhIiwiTWF0aCIsIm1pbiIsImFwcGx5IiwiYXJyYXlNYXgiLCJtYXgiLCJjcmVhdGVOcyIsInR5cGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnROUyIsIk1pbmlDaGFydCIsImRvbSIsInRoaXMiLCJ3aWR0aCIsImhlaWdodCIsInN2ZyIsIm1hcmdpbiIsInNlcmllcyIsIm1hcCIsIml0ZW0iLCJsaW1pdCIsImxlbmd0aCIsInNtb290aCIsInBvaW50QXJyIiwibGVuIiwic2xpY2UiLCJoIiwidyIsImQiLCJpIiwieCIsInkiLCJkYXRhVG9Qb2ludHMiLCJwb2ludHNQYXRoIiwicHJldiIsInAiLCJyZXMiLCJjdXJ2ZSIsInJlZHVjZSIsImEiLCJiIiwiY29uY2F0IiwicG9pbnRzVG9QYXRoIiwiY2xvc2VQb2ludHNQYXRoIiwiZyIsImRlYWxTZXJpZXMiLCJmb3JFYWNoIiwicGFyZW50IiwicGF0aCIsInNldEF0dHJpYnV0ZSIsImpvaW4iLCJzdHJva2UiLCJzdHJva2VXaWR0aCIsInN0cm9rZURhc2hhcnJheSIsImFwcGVuZENoaWxkIiwiZmlsbCIsImZpbGxQYXRoIiwiZmlsbE9wYWNpdHkiLCJpbnNlcnRCZWZvcmUiLCJhcHBlbmRQYXRoIiwiYXBwZW5kUG9seWxpbmUiLCJvcHRpb24iLCJFcnJvciIsImlubmVySFRNTCIsImNyZWF0ZVBhdGgiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiXSwibWFwcGluZ3MiOiJDQUFBLFNBQTJDQSxFQUFNQyxHQUMxQixpQkFBWkMsU0FBMEMsaUJBQVhDLE9BQ3hDQSxPQUFPRCxRQUFVRCxJQUNRLG1CQUFYRyxRQUF5QkEsT0FBT0MsSUFDOUNELE9BQU8sR0FBSUgsR0FDZSxpQkFBWkMsUUFDZEEsUUFBbUIsVUFBSUQsSUFFdkJELEVBQWdCLFVBQUlDLElBUnRCLENBU0dLLE1BQU0sV0FDVCxNLHdDQ1ZPLFNBQVNDLEVBQVNDLEdBQ3ZCLE9BQU9DLEtBQUtDLElBQUlDLE1BQU1GLEtBQU1ELEdBR3ZCLFNBQVNJLEVBQVNKLEdBQ3ZCLE9BQU9DLEtBQUtJLElBQUlGLE1BQU1GLEtBQU1ELEdBR3ZCLFNBQVNNLEVBQVNDLEdBQ3ZCLE9BQU9DLFNBQVNDLGdCQUFnQiw2QkFBOEJGLEcsOEJDUGhFLE1BQU1HLEVBQ0osWUFBWUMsR0FDVkMsS0FBS0QsSUFBTUEsRUFDWEMsS0FBS0MsTUFBUSxHQUNiRCxLQUFLRSxPQUFTLEdBQ2RGLEtBQUtHLElBQU0sR0FDWEgsS0FBS1AsSUFBTSxH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bE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJtaW5pY2hhcnRcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wibWluaWNoYXJ0XCJdID0gZmFjdG9yeSgpO1xufSkoc2VsZiwgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiZXhwb3J0IGZ1bmN0aW9uIGFycmF5TWluKGRhdGEpIHtcbiAgcmV0dXJuIE1hdGgubWluLmFwcGx5KE1hdGgsIGRhdGEpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcnJheU1heChkYXRhKSB7XG4gIHJldHVybiBNYXRoLm1heC5hcHBseShNYXRoLCBkYXRhKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTnModHlwZSkge1xuICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgdHlwZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZFBvbHlsaW5lKHBhcmVudCwgaSkge1xuICBsZXQgcGF0aCA9IGNyZWF0ZU5zKCdwb2x5bGluZScpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdwb2ludHMnLCBpLnBvaW50c1BhdGgpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2UnLCBpLnN0cm9rZSB8fCAnc2xhdGVncmF5JylcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsIGkuc3Ryb2tlV2lkdGggfHwgMilcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNoYXJyYXknLCBpLnN0cm9rZURhc2hhcnJheSB8fCAnbm9uZScpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdmaWxsJywgJ25vbmUnKVxuICBwYXJlbnQuYXBwZW5kQ2hpbGQocGF0aClcbiAgaWYgKGkuZmlsbCkge1xuICAgIGxldCBmaWxsUGF0aCA9IGNyZWF0ZU5zKCdwb2x5bGluZScpXG4gICAgZmlsbFBhdGguc2V0QXR0cmlidXRlKCdwb2ludHMnLCBpLmNsb3NlUG9pbnRzUGF0aClcbiAgICBmaWxsUGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCBpLmZpbGwpXG4gICAgZmlsbFBhdGguc2V0QXR0cmlidXRlKCdmaWxsLW9wYWNpdHknLCBpLmZpbGxPcGFjaXR5IHx8ICcuMicpXG4gICAgcGFyZW50Lmluc2VydEJlZm9yZShmaWxsUGF0aCwgcGF0aClcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwZW5kUGF0aChwYXJlbnQsIGkpIHtcbiAgbGV0IHBhdGggPSBjcmVhdGVOcygncGF0aCcpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdkJywgYE0ke2kucG9pbnRzUGF0aC5qb2luKCcgJyl9YClcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsIGkuc3Ryb2tlIHx8ICdzbGF0ZWdyYXknKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgaS5zdHJva2VXaWR0aCB8fCAyKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWRhc2hhcnJheScsIGkuc3Ryb2tlRGFzaGFycmF5IHx8ICdub25lJylcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnbm9uZScpXG4gIHBhcmVudC5hcHBlbmRDaGlsZChwYXRoKVxuICBpZiAoaS5maWxsKSB7XG4gICAgbGV0IGZpbGxQYXRoID0gY3JlYXRlTnMoJ3BhdGgnKVxuICAgIGZpbGxQYXRoLnNldEF0dHJpYnV0ZSgnZCcsIGBNJHtpLmNsb3NlUG9pbnRzUGF0aC5qb2luKCcgJyl9YClcbiAgICBmaWxsUGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCBpLmZpbGwpXG4gICAgZmlsbFBhdGguc2V0QXR0cmlidXRlKCdmaWxsLW9wYWNpdHknLCBpLmZpbGxPcGFjaXR5IHx8ICcuMicpXG4gICAgcGFyZW50Lmluc2VydEJlZm9yZShmaWxsUGF0aCwgcGF0aClcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGF0YVRvUG9pbnRzKFxuICB7XG4gICAgZGF0YSxcbiAgICBsaW1pdCxcbiAgICB3aWR0aCA9IDEsXG4gICAgaGVpZ2h0ID0gMSxcbiAgICBtYXggPSBhcnJheU1heChkYXRhKSxcbiAgICBtaW4gPSBhcnJheU1pbihkYXRhKSxcbiAgICBtYXJnaW5cbiAgfVxuKSB7XG4gIGNvbnN0IGxlbiA9IGRhdGEubGVuZ3RoXG5cbiAgaWYgKGxpbWl0ICYmIGxpbWl0IDwgbGVuKSB7XG4gICAgZGF0YSA9IGRhdGEuc2xpY2UobGVuIC0gbGltaXQpXG4gIH1cblxuICBjb25zdCBoID0gKGhlaWdodCAtIG1hcmdpbiAqIDIpIC8gKChtYXggLSBtaW4pIHx8IDIpXG4gIGNvbnN0IHcgPSAod2lkdGggLSBtYXJnaW4gKiAyKSAvICgobGltaXQgfHwgbGVuKSAtIChsZW4gPiAxID8gMSA6IDApKVxuXG4gIHJldHVybiBkYXRhLm1hcCgoZCwgaSkgPT4gKHtcbiAgICB4OiBpICogdyArIG1hcmdpbixcbiAgICB5OiAobWF4ID09PSBtaW4gPyAxIDogKG1heCAtIGQpKSAqIGggKyBtYXJnaW5cbiAgfSkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwb2ludHNUb1BhdGgocG9pbnRBcnIsIHNtb290aCkge1xuICBsZXQgcG9pbnRzUGF0aFxuICBpZiAoc21vb3RoKSB7XG4gICAgbGV0IHByZXZcblxuICAgIGZ1bmN0aW9uIGN1cnZlKHApIHtcbiAgICAgIGxldCByZXNcbiAgICAgIGlmICghcHJldikge1xuICAgICAgICByZXMgPSBbcC54LCBwLnldXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBsZW4gPSAocC54IC0gcHJldi54KSAqIDAuNVxuICAgICAgICByZXMgPSBbXG4gICAgICAgICAgJ0MnLFxuICAgICAgICAgIHByZXYueCArIGxlbixcbiAgICAgICAgICBwcmV2LnksXG4gICAgICAgICAgcC54IC0gbGVuLFxuICAgICAgICAgIHAueSxcbiAgICAgICAgICBwLngsXG4gICAgICAgICAgcC55XG4gICAgICAgIF1cbiAgICAgIH1cbiAgICAgIHByZXYgPSBwXG4gICAgICByZXR1cm4gcmVzXG4gICAgfVxuXG4gICAgcG9pbnRzUGF0aCA9IHBvaW50QXJyLm1hcChwID0+IGN1cnZlKHApKS5yZWR1Y2UoKGEsIGIpID0+IGEuY29uY2F0KGIpKVxuICB9IGVsc2Uge1xuICAgIHBvaW50c1BhdGggPSBwb2ludEFyci5tYXAocCA9PiBbcC54LCBwLnldKS5yZWR1Y2UoKGEsIGIpID0+IGEuY29uY2F0KGIpKVxuICB9XG4gIHJldHVybiBwb2ludHNQYXRoXG59XG4iLCJpbXBvcnQge2RhdGFUb1BvaW50cywgY3JlYXRlTnMsIGFwcGVuZFBvbHlsaW5lLCBwb2ludHNUb1BhdGgsIGFwcGVuZFBhdGh9IGZyb20gJy4vdXRpbHMvdXRpbCdcblxuY2xhc3MgTWluaUNoYXJ0IHtcbiAgY29uc3RydWN0b3IoZG9tKSB7XG4gICAgdGhpcy5kb20gPSBkb21cbiAgICB0aGlzLndpZHRoID0gJydcbiAgICB0aGlzLmhlaWdodCA9ICcnXG4gICAgdGhpcy5zdmcgPSAnJ1xuICAgIHRoaXMubWF4ID0gJydcbiAgICB0aGlzLm1pbiA9ICcnXG4gICAgdGhpcy5tYXJnaW4gPSAnJ1xuICB9XG5cbiAgc3RhdGljIGluaXQoZG9tKSB7XG4gICAgcmV0dXJuIG5ldyBNaW5pQ2hhcnQoZG9tKVxuICB9XG5cbiAgZGVhbFNlcmllcyhzZXJpZXMpIHtcbiAgICByZXR1cm4gc2VyaWVzLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBkYXRhLFxuICAgICAgICBsaW1pdCA9IGRhdGEubGVuZ3RoLFxuICAgICAgICBzbW9vdGggIC8vIOaYr+WQpuS4uuW5s+a7keabsue6v1xuICAgICAgfSA9IGl0ZW1cbiAgICAgIGNvbnN0IHBvaW50QXJyID0gZGF0YVRvUG9pbnRzKHtcbiAgICAgICAgZGF0YSxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxuICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxuICAgICAgICBtYXg6IHRoaXMubWF4LFxuICAgICAgICBtaW46IHRoaXMubWluLFxuICAgICAgICBtYXJnaW46IHRoaXMubWFyZ2luXG4gICAgICB9KVxuICAgICAgLy8g5bGV56S655qE6Lev5b6EXG4gICAgICBsZXQgcG9pbnRzUGF0aCA9IHBvaW50c1RvUGF0aChwb2ludEFyciwgc21vb3RoKVxuICAgICAgLy8g6Zet5ZCI6Lev5b6E5L2c5Li65bGV56S66Zi05b2xXG4gICAgICBjb25zdCBjbG9zZVBvaW50c1BhdGggPSBwb2ludHNQYXRoLmNvbmNhdChbXG4gICAgICAgIHNtb290aCA/IGBMICR7cG9pbnRBcnJbcG9pbnRBcnIubGVuZ3RoIC0gMV0ueH1gIDogcG9pbnRBcnJbcG9pbnRBcnIubGVuZ3RoIC0gMV0ueCxcbiAgICAgICAgdGhpcy5oZWlnaHQgLSB0aGlzLm1hcmdpbixcbiAgICAgICAgdGhpcy5tYXJnaW4sXG4gICAgICAgIHRoaXMuaGVpZ2h0IC0gdGhpcy5tYXJnaW4sXG4gICAgICBdKVxuICAgICAgcmV0dXJuIHsuLi5pdGVtLCBwb2ludHNQYXRoLCBjbG9zZVBvaW50c1BhdGh9XG4gICAgfSlcbiAgfVxuXG4gIGNyZWF0ZVBhdGgoc2VyaWVzKSB7XG4gICAgY29uc3QgZyA9IGNyZWF0ZU5zKCdnJylcbiAgICBsZXQgZGF0YSA9IHRoaXMuZGVhbFNlcmllcyhzZXJpZXMpXG4gICAgZGF0YS5mb3JFYWNoKChpKSA9PiB7XG4gICAgICBzd2l0Y2ggKGkudHlwZSkge1xuICAgICAgICBjYXNlICdsaW5lJzpcbiAgICAgICAgICBpLnNtb290aCA/IGFwcGVuZFBhdGgoZywgaSkgOiBhcHBlbmRQb2x5bGluZShnLCBpKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2Jhcic6XG4gICAgICAgICAgLy8gYXBwZW5kUG9seWxpbmUoZywgaSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdwaWUnOlxuICAgICAgICAgIC8vIGFwcGVuZFBvbHlsaW5lKGcsIGkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBnXG4gIH1cblxuICBzZXRPcHRpb24ob3B0aW9uID0ge30pIHtcbiAgICBsZXQge3dpZHRoID0gMTAwLCBoZWlnaHQgPSAzMCwgc2VyaWVzLCBtYXgsIG1pbiwgbWFyZ2luID0gNX0gPSBvcHRpb25cbiAgICB0aGlzLndpZHRoID0gd2lkdGhcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodFxuICAgIHRoaXMubWF4ID0gbWF4XG4gICAgdGhpcy5taW4gPSBtaW5cbiAgICB0aGlzLm1hcmdpbiA9IG1hcmdpblxuICAgIGlmICghc2VyaWVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBvcHRpb24gbXVzdCBoYXZlIHNlcmllcyEnKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuc3ZnKSB7XG4gICAgICB0aGlzLnN2ZyA9IGNyZWF0ZU5zKCdzdmcnKVxuICAgICAgdGhpcy5zdmcuc2V0QXR0cmlidXRlKCd2aWV3Qm94JywgYDAgMCAke3dpZHRofSAke2hlaWdodH1gKVxuICAgICAgdGhpcy5zdmcuc2V0QXR0cmlidXRlKCdzdHlsZScsIGB3aWR0aDoke3dpZHRofXB4OyBoZWlnaHQ6JHtoZWlnaHR9cHhgKVxuICAgICAgdGhpcy5zdmcuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVQYXRoKHNlcmllcykpXG4gICAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZCh0aGlzLnN2ZylcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdmcuaW5uZXJIVE1MID0gJydcbiAgICAgIHRoaXMuc3ZnLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlUGF0aChzZXJpZXMpKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNaW5pQ2hhcnRcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gbW9kdWxlIGV4cG9ydHMgbXVzdCBiZSByZXR1cm5lZCBmcm9tIHJ1bnRpbWUgc28gZW50cnkgaW5saW5pbmcgaXMgZGlzYWJsZWRcbi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xucmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oOTI0KTtcbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07Il0sInNvdXJjZVJvb3QiOiIifQ==
(()=>{"use strict";function t(t){return Math.min.apply(Math,t)}function e(t){return Math.max.apply(Math,t)}function i(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}class s{constructor(t){this.dom=t,this.width="",this.height="",this.svg="",this.max="",this.min="",this.margin=""}static init(t){return new s(t)}dealSeries(i){return i.map((i=>{const{data:s,limit:r=s.length}=i,n=function({data:i,limit:s,width:r=1,height:n=1,max:a=e(i),min:h=t(i),margin:o}){const l=i.length;s&&s<l&&(i=i.slice(l-s));const c=(n-2*o)/(a-h||2),u=(r-2*o)/((s||l)-(l>1?1:0));return i.map(((t,e)=>({x:e*u+o,y:(a===h?1:a-t)*c+o})))}({data:s,limit:r,width:this.width,height:this.height,max:this.max,min:this.min,margin:this.margin});return{...i,limit:r,pointArr:n}}))}createPath(s){const r=i("g");return this.dealSeries(s).forEach((s=>{switch(s.type){case"line":!function(t,e,s){let{pointArr:r,smooth:n}=t,a=function(t,e){let i;if(e){let e;i=t.map((t=>function(t){let i;if(e){const s=.5*(t.x-e.x);i=["C",e.x+s,e.y,t.x-s,t.y,t.x,t.y]}else i=[t.x,t.y];return e=t,i}(t))).reduce(((t,e)=>t.concat(e)))}else i=t.map((t=>[t.x,t.y])).reduce(((t,e)=>t.concat(e)));return i}(r,n);const h=a.concat([n?`L ${r[r.length-1].x}`:r[r.length-1].x,e.height-e.margin,e.margin,e.height-e.margin]);let o={...t,pointsPath:a,closePointsPath:h};n?function(t,e){let s=i("path");if(s.setAttribute("d",`M${e.pointsPath.join(" ")}`),s.setAttribute("stroke",e.stroke||"slategray"),s.setAttribute("stroke-width",e.strokeWidth||2),s.setAttribute("stroke-dasharray",e.strokeDasharray||"none"),s.setAttribute("fill","none"),t.appendChild(s),e.fill){let r=i("path");r.setAttribute("d",`M${e.closePointsPath.join(" ")}`),r.setAttribute("fill",e.fill),r.setAttribute("fill-opacity",e.fillOpacity||".2"),t.insertBefore(r,s)}}(s,o):function(t,e){let s=i("polyline");if(s.setAttribute("points",e.pointsPath),s.setAttribute("stroke",e.stroke||"slategray"),s.setAttribute("stroke-width",e.strokeWidth||2),s.setAttribute("stroke-dasharray",e.strokeDasharray||"none"),s.setAttribute("fill","none"),t.appendChild(s),e.fill){let r=i("polyline");r.setAttribute("points",e.closePointsPath),r.setAttribute("fill",e.fill),r.setAttribute("fill-opacity",e.fillOpacity||".2"),t.insertBefore(r,s)}}(s,o)}(s,this,r);break;case"bar":!function(t,e,s){let{pointArr:r,data:n,limit:a}=t;const h=e.margin?2*e.margin:0,o=n.length===a,l=o?(e.width-a*h)/a:r&&r.length>=2?Math.max(0,r[1].x-r[0].x-h):0;if(l<1)throw new Error("Too much data, please enlarge the width or reduce the margin");r.forEach(((r,a)=>{const c=o?Math.ceil((l+h)*a+e.margin):Math.ceil(r.x*a),u=Math.ceil(r.y),d=Math.ceil(l),m=Math.ceil(Math.max(0,e.height-r.y)),p=n[a];!function(t,e,{x:s,y:r,width:n,height:a,num:h}){let o=i("rect");o.setAttribute("x",s),o.setAttribute("y",r),o.setAttribute("width",n),o.setAttribute("height",a),o.setAttribute("num",h),o.setAttribute("fill",e.fill||"#409EFF"),t.appendChild(o)}(s,t,{x:c,y:u,width:d,height:m,num:p})}))}(s,this,r)}s.markLine&&s.markLine.type&&function(s,r){const{markLine:n,pointArr:a}=s;let{type:h="average",stroke:o="#d14",strokeOpacity:l=1,strokeDasharray:c="2,2"}=n;const u=a.map((t=>t.y));let d="";switch(h){case"min":d=e(u);break;case"max":d=t(u);break;case"average":d=(m=u).reduce(((t,e)=>t+e))/m.length;break;case"median":d=function(t){return t.sort(((t,e)=>t-e))[Math.floor(t.length/2)]}(u)}var m;let p=i("line");p.setAttribute("shape-rendering","crispEdges"),p.setAttribute("stroke",o),p.setAttribute("stroke-opacity",l),p.setAttribute("stroke-dasharray",c),p.setAttribute("x1",a[0].x),p.setAttribute("y1",d),p.setAttribute("x2",a[a.length-1].x),p.setAttribute("y2",d),r.appendChild(p)}(s,r)})),r}setOption(t={}){let{width:e=100,height:s=30,series:r,max:n,min:a,margin:h=2}=t;if(this.width=e,this.height=s,this.max=n,this.min=a,this.margin=h,!r)throw new Error("Please option must have series!");this.svg?(this.svg.innerHTML="",this.svg.appendChild(this.createPath(r))):(this.svg=i("svg"),this.svg.setAttribute("viewBox",`0 0 ${e} ${s}`),this.svg.setAttribute("style",`width:${e}px; height:${s}px`),this.svg.appendChild(this.createPath(r)),this.dom.appendChild(this.svg))}}const r=s;window.onload=function(){r.init(document.getElementById("line1")).setOption({series:[{data:[820,932,901,934,1290,1330,1320],type:"line",fill:"#8956FF",stroke:"#8956FF"}]}),r.init(document.getElementById("line2")).setOption({series:[{data:[820,932,901,934,1290,1330,1320],type:"line",fill:"#8956FF",stroke:"#8956FF",strokeWidth:4,smooth:!0}]}),r.init(document.getElementById("bar1")).setOption({series:[{data:[820,932,901,934,1290,1330,1320],type:"bar",fill:"#8956FF"}]}),r.init(document.getElementById("line3")).setOption({series:[{data:[820,932,901,934,1290,1330,1320],type:"line",fill:"#8956FF",stroke:"#8956FF",markLine:{type:"average",stroke:"#d14",strokeOpacity:1,strokeDasharray:"2, 2"}}]})}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFsbGNoYXJ0Ly4vc3JjL3V0aWxzL3V0aWwuanMiLCJ3ZWJwYWNrOi8vc21hbGxjaGFydC8uL3NyYy9zbWFsbGNoYXJ0LmpzIiwid2VicGFjazovL3NtYWxsY2hhcnQvLi9kZW1vL2luZGV4LmpzIl0sIm5hbWVzIjpbImFycmF5TWluIiwiZGF0YSIsIk1hdGgiLCJtaW4iLCJhcHBseSIsImFycmF5TWF4IiwibWF4IiwiY3JlYXRlTnMiLCJ0eXBlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJTbWFsbENoYXJ0IiwiZG9tIiwidGhpcyIsIndpZHRoIiwiaGVpZ2h0Iiwic3ZnIiwibWFyZ2luIiwic2VyaWVzIiwibWFwIiwiaXRlbSIsImxpbWl0IiwibGVuZ3RoIiwicG9pbnRBcnIiLCJsZW4iLCJzbGljZSIsImgiLCJ3IiwiZCIsImkiLCJ4IiwieSIsImRhdGFUb1BvaW50cyIsImciLCJkZWFsU2VyaWVzIiwiZm9yRWFjaCIsIl90aGlzIiwic21vb3RoIiwicG9pbnRzUGF0aCIsInByZXYiLCJwIiwicmVzIiwiY3VydmUiLCJyZWR1Y2UiLCJhIiwiYiIsImNvbmNhdCIsInBvaW50c1RvUGF0aCIsImNsb3NlUG9pbnRzUGF0aCIsInBhcmVudCIsInBhdGgiLCJzZXRBdHRyaWJ1dGUiLCJqb2luIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJzdHJva2VEYXNoYXJyYXkiLCJhcHBlbmRDaGlsZCIsImZpbGwiLCJmaWxsUGF0aCIsImZpbGxPcGFjaXR5IiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kUGF0aCIsImFwcGVuZFBvbHlsaW5lIiwiZGVhbExpbmVEYXRhIiwibWFyZ2luV2lkdGgiLCJub0xpbWl0IiwiYmFyV2lkdGgiLCJFcnJvciIsImNlaWwiLCJudW0iLCJyZWN0IiwiYXBwZW5kUmVjdCIsImRlYWxCYXJEYXRhIiwibWFya0xpbmUiLCJzdHJva2VPcGFjaXR5IiwieVBvaW50cyIsInNvcnQiLCJmbG9vciIsIm1lZGlhbiIsImRlYWxNYXJrTGluZSIsIm9wdGlvbiIsImlubmVySFRNTCIsImNyZWF0ZVBhdGgiLCJ3aW5kb3ciLCJvbmxvYWQiLCJnZXRFbGVtZW50QnlJZCIsInNldE9wdGlvbiJdLCJtYXBwaW5ncyI6Im1CQUFPLFNBQVNBLEVBQVNDLEdBQ3ZCLE9BQU9DLEtBQUtDLElBQUlDLE1BQU1GLEtBQU1ELEdBR3ZCLFNBQVNJLEVBQVNKLEdBQ3ZCLE9BQU9DLEtBQUtJLElBQUlGLE1BQU1GLEtBQU1ELEdBV3ZCLFNBQVNNLEVBQVNDLEdBQ3ZCLE9BQU9DLFNBQVNDLGdCQUFnQiw2QkFBOEJGLEdDZmhFLE1BQU1HLEVBQ0osWUFBWUMsR0FDVkMsS0FBS0QsSUFBTUEsRUFDWEMsS0FBS0MsTUFBUSxHQUNiRCxLQUFLRSxPQUFTLEdBQ2RGLEtBQUtHLElBQU0sR0FDWEgsS0FBS1AsSUFBTSxHQUNYTyxLQUFLVixJQUFNLEdBQ1hVLEtBQUtJLE9BQVMsR0FHaEIsWUFBWUwsR0FDVixPQUFPLElBQUlELEVBQVdDLEdBR3hCLFdBQVdNLEdBQ1QsT0FBT0EsRUFBT0MsS0FBS0MsSUFDakIsTUFBTSxLQUNKbkIsRUFBSSxNQUNKb0IsRUFBUXBCLEVBQUtxQixRQUNYRixFQUNFRyxFRDBDTCxVQUNMLEtBQ0V0QixFQUFJLE1BQ0pvQixFQUFLLE1BQ0xQLEVBQVEsRUFBQyxPQUNUQyxFQUFTLEVBQUMsSUFDVlQsRUFBTUQsRUFBU0osR0FBSyxJQUNwQkUsRUFBTUgsRUFBU0MsR0FBSyxPQUNwQmdCLElBR0YsTUFBTU8sRUFBTXZCLEVBQUtxQixPQUViRCxHQUFTQSxFQUFRRyxJQUNuQnZCLEVBQU9BLEVBQUt3QixNQUFNRCxFQUFNSCxJQUcxQixNQUFNSyxHQUFLWCxFQUFrQixFQUFURSxJQUFnQlgsRUFBTUgsR0FBUSxHQUM1Q3dCLEdBQUtiLEVBQWlCLEVBQVRHLEtBQWdCSSxHQUFTRyxJQUFRQSxFQUFNLEVBQUksRUFBSSxJQUVsRSxPQUFPdkIsRUFBS2tCLEtBQUksQ0FBQ1MsRUFBR0MsS0FBTSxDQUN4QkMsRUFBR0QsRUFB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QUFDLElBQUssSUFBSyxJQUFLLElBQUssS0FBTSxLQUFNLE1BQ3ZDTyxLQUFNLE9BQ05pRCxLQUFNLFVBQ05KLE9BQVEsY0FHQSxPQUFnQjVDLFNBQVM0RSxlQUFlLFVBQzlDQyxVQUFVLENBR2RwRSxPQUFRLENBQUMsQ0FDUGpCLEtBQU0sQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLEtBQU0sS0FBTSxNQUN2Q08sS0FBTSxPQUNOaUQsS0FBTSxVQUNOSixPQUFRLFVBQ1JDLFlBQWEsRUFFYmpCLFFBQVEsTUFHRCxPQUFnQjVCLFNBQVM0RSxlQUFlLFNBQzlDQyxVQUFVLENBQ2JwRSxPQUFRLENBQUMsQ0FDUGpCLEtBQU0sQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLEtBQU0sS0FBTSxNQUN2Q08sS0FBTSxNQUNOaUQsS0FBTSxjQUlFLE9BQWdCaEQsU0FBUzRFLGVBQWUsVUFDOUNDLFVBQVUsQ0FDZHBFLE9BQVEsQ0FBQyxDQUNQakIsS0FBTSxDQUFDLElBQUssSUFBSyxJQUFLLElBQUssS0FBTSxLQUFNLE1BQ3ZDTyxLQUFNLE9BQ05pRCxLQUFNLFVBQ05KLE9BQVEsVUFDUm9CLFNBQVUsQ0FDUmpFLEtBQU0sVUFDTjZDLE9BQVEsT0FDUnFCLGNBQWUsRUFDZm5CLGdCQUFpQixjIiwiZmlsZSI6InNtYWxsY2hhcnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gYXJyYXlNaW4oZGF0YSkge1xuICByZXR1cm4gTWF0aC5taW4uYXBwbHkoTWF0aCwgZGF0YSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5TWF4KGRhdGEpIHtcbiAgcmV0dXJuIE1hdGgubWF4LmFwcGx5KE1hdGgsIGRhdGEpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZWRpYW4oZGF0YSkge1xuICByZXR1cm4gZGF0YS5zb3J0KChhLCBiKSA9PiBhIC0gYilbTWF0aC5mbG9vcihkYXRhLmxlbmd0aCAvIDIpXVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXZlcmFnZShkYXRhKSB7XG4gIHJldHVybiBkYXRhLnJlZHVjZSgoYSwgYikgPT4gYSArIGIpIC8gZGF0YS5sZW5ndGhcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU5zKHR5cGUpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIHR5cGUpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmRQb2x5bGluZShwYXJlbnQsIGkpIHtcbiAgbGV0IHBhdGggPSBjcmVhdGVOcygncG9seWxpbmUnKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgncG9pbnRzJywgaS5wb2ludHNQYXRoKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgaS5zdHJva2UgfHwgJ3NsYXRlZ3JheScpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCBpLnN0cm9rZVdpZHRoIHx8IDIpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2UtZGFzaGFycmF5JywgaS5zdHJva2VEYXNoYXJyYXkgfHwgJ25vbmUnKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdub25lJylcbiAgcGFyZW50LmFwcGVuZENoaWxkKHBhdGgpXG4gIGlmIChpLmZpbGwpIHtcbiAgICBsZXQgZmlsbFBhdGggPSBjcmVhdGVOcygncG9seWxpbmUnKVxuICAgIGZpbGxQYXRoLnNldEF0dHJpYnV0ZSgncG9pbnRzJywgaS5jbG9zZVBvaW50c1BhdGgpXG4gICAgZmlsbFBhdGguc2V0QXR0cmlidXRlKCdmaWxsJywgaS5maWxsKVxuICAgIGZpbGxQYXRoLnNldEF0dHJpYnV0ZSgnZmlsbC1vcGFjaXR5JywgaS5maWxsT3BhY2l0eSB8fCAnLjInKVxuICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoZmlsbFBhdGgsIHBhdGgpXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZFBhdGgocGFyZW50LCBpKSB7XG4gIGxldCBwYXRoID0gY3JlYXRlTnMoJ3BhdGgnKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgnZCcsIGBNJHtpLnBvaW50c1BhdGguam9pbignICcpfWApXG4gIHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2UnLCBpLnN0cm9rZSB8fCAnc2xhdGVncmF5JylcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsIGkuc3Ryb2tlV2lkdGggfHwgMilcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNoYXJyYXknLCBpLnN0cm9rZURhc2hhcnJheSB8fCAnbm9uZScpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdmaWxsJywgJ25vbmUnKVxuICBwYXJlbnQuYXBwZW5kQ2hpbGQocGF0aClcbiAgaWYgKGkuZmlsbCkge1xuICAgIGxldCBmaWxsUGF0aCA9IGNyZWF0ZU5zKCdwYXRoJylcbiAgICBmaWxsUGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCBgTSR7aS5jbG9zZVBvaW50c1BhdGguam9pbignICcpfWApXG4gICAgZmlsbFBhdGguc2V0QXR0cmlidXRlKCdmaWxsJywgaS5maWxsKVxuICAgIGZpbGxQYXRoLnNldEF0dHJpYnV0ZSgnZmlsbC1vcGFjaXR5JywgaS5maWxsT3BhY2l0eSB8fCAnLjInKVxuICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoZmlsbFBhdGgsIHBhdGgpXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZFJlY3QocGFyZW50LCBpLCB7eCwgeSwgd2lkdGgsIGhlaWdodCwgbnVtfSkge1xuICBsZXQgcmVjdCA9IGNyZWF0ZU5zKCdyZWN0JylcbiAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3gnLCB4KVxuICByZWN0LnNldEF0dHJpYnV0ZSgneScsIHkpXG4gIHJlY3Quc2V0QXR0cmlidXRlKCd3aWR0aCcsIHdpZHRoKVxuICByZWN0LnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgaGVpZ2h0KVxuICByZWN0LnNldEF0dHJpYnV0ZSgnbnVtJywgbnVtKVxuICByZWN0LnNldEF0dHJpYnV0ZSgnZmlsbCcsIGkuZmlsbCB8fCAnIzQwOUVGRicpXG4gIHBhcmVudC5hcHBlbmRDaGlsZChyZWN0KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGF0YVRvUG9pbnRzKFxuICB7XG4gICAgZGF0YSxcbiAgICBsaW1pdCxcbiAgICB3aWR0aCA9IDEsXG4gICAgaGVpZ2h0ID0gMSxcbiAgICBtYXggPSBhcnJheU1heChkYXRhKSxcbiAgICBtaW4gPSBhcnJheU1pbihkYXRhKSxcbiAgICBtYXJnaW5cbiAgfVxuKSB7XG4gIGNvbnN0IGxlbiA9IGRhdGEubGVuZ3RoXG5cbiAgaWYgKGxpbWl0ICYmIGxpbWl0IDwgbGVuKSB7XG4gICAgZGF0YSA9IGRhdGEuc2xpY2UobGVuIC0gbGltaXQpXG4gIH1cblxuICBjb25zdCBoID0gKGhlaWdodCAtIG1hcmdpbiAqIDIpIC8gKChtYXggLSBtaW4pIHx8IDIpXG4gIGNvbnN0IHcgPSAod2lkdGggLSBtYXJnaW4gKiAyKSAvICgobGltaXQgfHwgbGVuKSAtIChsZW4gPiAxID8gMSA6IDApKVxuXG4gIHJldHVybiBkYXRhLm1hcCgoZCwgaSkgPT4gKHtcbiAgICB4OiBpICogdyArIG1hcmdpbixcbiAgICB5OiAobWF4ID09PSBtaW4gPyAxIDogKG1heCAtIGQpKSAqIGggKyBtYXJnaW5cbiAgfSkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwb2ludHNUb1BhdGgocG9pbnRBcnIsIHNtb290aCkge1xuICBsZXQgcG9pbnRzUGF0aFxuICBpZiAoc21vb3RoKSB7XG4gICAgbGV0IHByZXZcblxuICAgIGZ1bmN0aW9uIGN1cnZlKHApIHtcbiAgICAgIGxldCByZXNcbiAgICAgIGlmICghcHJldikge1xuICAgICAgICByZXMgPSBbcC54LCBwLnldXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBsZW4gPSAocC54IC0gcHJldi54KSAqIDAuNVxuICAgICAgICByZXMgPSBbXG4gICAgICAgICAgJ0MnLFxuICAgICAgICAgIHByZXYueCArIGxlbixcbiAgICAgICAgICBwcmV2LnksXG4gICAgICAgICAgcC54IC0gbGVuLFxuICAgICAgICAgIHAueSxcbiAgICAgICAgICBwLngsXG4gICAgICAgICAgcC55XG4gICAgICAgIF1cbiAgICAgIH1cbiAgICAgIHByZXYgPSBwXG4gICAgICByZXR1cm4gcmVzXG4gICAgfVxuXG4gICAgcG9pbnRzUGF0aCA9IHBvaW50QXJyLm1hcChwID0+IGN1cnZlKHApKS5yZWR1Y2UoKGEsIGIpID0+IGEuY29uY2F0KGIpKVxuICB9IGVsc2Uge1xuICAgIHBvaW50c1BhdGggPSBwb2ludEFyci5tYXAocCA9PiBbcC54LCBwLnldKS5yZWR1Y2UoKGEsIGIpID0+IGEuY29uY2F0KGIpKVxuICB9XG4gIHJldHVybiBwb2ludHNQYXRoXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWFsTGluZURhdGEoaXRlbSwgX3RoaXMsIGcpIHtcbiAgbGV0IHtwb2ludEFyciwgc21vb3RofSA9IGl0ZW1cbiAgLy8g5bGV56S655qE6Lev5b6EXG4gIGxldCBwb2ludHNQYXRoID0gcG9pbnRzVG9QYXRoKHBvaW50QXJyLCBzbW9vdGgpXG4gIC8vIOmXreWQiOi3r+W+hOS9nOS4uuWxleekuumYtOW9sVxuICBjb25zdCBjbG9zZVBvaW50c1BhdGggPSBwb2ludHNQYXRoLmNvbmNhdChbXG4gICAgc21vb3RoID8gYEwgJHtwb2ludEFycltwb2ludEFyci5sZW5ndGggLSAxXS54fWAgOiBwb2ludEFycltwb2ludEFyci5sZW5ndGggLSAxXS54LFxuICAgIF90aGlzLmhlaWdodCAtIF90aGlzLm1hcmdpbixcbiAgICBfdGhpcy5tYXJnaW4sXG4gICAgX3RoaXMuaGVpZ2h0IC0gX3RoaXMubWFyZ2luLFxuICBdKVxuICBsZXQgZCA9IHsuLi5pdGVtLCBwb2ludHNQYXRoLCBjbG9zZVBvaW50c1BhdGh9XG4gIHNtb290aCA/IGFwcGVuZFBhdGgoZywgZCkgOiBhcHBlbmRQb2x5bGluZShnLCBkKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVhbEJhckRhdGEoaXRlbSwgX3RoaXMsIGcpIHtcbiAgbGV0IHtwb2ludEFyciwgZGF0YSwgbGltaXR9ID0gaXRlbVxuICBjb25zdCBtYXJnaW5XaWR0aCA9IF90aGlzLm1hcmdpbiA/IDIgKiBfdGhpcy5tYXJnaW4gOiAwXG4gIGNvbnN0IG5vTGltaXQgPSBkYXRhLmxlbmd0aCA9PT0gbGltaXRcbiAgY29uc3QgYmFyV2lkdGggPSBub0xpbWl0XG4gICAgPyAoKF90aGlzLndpZHRoIC0gbGltaXQgKiBtYXJnaW5XaWR0aCkgLyBsaW1pdClcbiAgICA6IChwb2ludEFyciAmJiBwb2ludEFyci5sZW5ndGggPj0gMiA/IE1hdGgubWF4KDAsIHBvaW50QXJyWzFdLnggLSBwb2ludEFyclswXS54IC0gbWFyZ2luV2lkdGgpIDogMClcblxuICBpZiAoYmFyV2lkdGggPCAxKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUb28gbXVjaCBkYXRhLCBwbGVhc2UgZW5sYXJnZSB0aGUgd2lkdGggb3IgcmVkdWNlIHRoZSBtYXJnaW4nKVxuICB9XG5cbiAgcG9pbnRBcnIuZm9yRWFjaCgocCwgaSkgPT4ge1xuICAgIGNvbnN0IHggPSBub0xpbWl0ID8gTWF0aC5jZWlsKChiYXJXaWR0aCArIG1hcmdpbldpZHRoKSAqIGkgKyBfdGhpcy5tYXJnaW4pIDogTWF0aC5jZWlsKHAueCAqIGkpXG4gICAgY29uc3QgeSA9IE1hdGguY2VpbChwLnkpXG4gICAgY29uc3Qgd2lkdGggPSBNYXRoLmNlaWwoYmFyV2lkdGgpXG4gICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5jZWlsKE1hdGgubWF4KDAsIF90aGlzLmhlaWdodCAtIHAueSkpXG4gICAgY29uc3QgbnVtID0gZGF0YVtpXVxuICAgIGFwcGVuZFJlY3QoZywgaXRlbSwge3gsIHksIHdpZHRoLCBoZWlnaHQsIG51bX0pXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWFsTWFya0xpbmUoaXRlbSwgZykge1xuICBjb25zdCB7bWFya0xpbmUsIHBvaW50QXJyfSA9IGl0ZW1cbiAgLyoqXG4gICAqIHR5cGUg5Y+v6L6T5YWl55qE5YC8XG4gICAqICBtaW4g5pyA5bCP5YC8XG4gICAqICBtYXgg5pyA5aSn5YC8XG4gICAqICBhdmVyYWdlIOW5s+Wdh+WAvFxuICAgKiAgbWVkaWFuIOS4reS9jeaVsFxuICAgKi9cblxuICBsZXQge3R5cGUgPSAnYXZlcmFnZScsIHN0cm9rZSA9ICcjZDE0Jywgc3Ryb2tlT3BhY2l0eSA9IDEsIHN0cm9rZURhc2hhcnJheSA9ICcyLDInfSA9IG1hcmtMaW5lXG4gIGNvbnN0IHlQb2ludHMgPSBwb2ludEFyci5tYXAocCA9PiBwLnkpXG4gIGxldCB5ID0gJydcblxuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdtaW4nOlxuICAgICAgeSA9IGFycmF5TWF4KHlQb2ludHMpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ21heCc6XG4gICAgICB5ID0gYXJyYXlNaW4oeVBvaW50cylcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnYXZlcmFnZSc6XG4gICAgICB5ID0gYXZlcmFnZSh5UG9pbnRzKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdtZWRpYW4nOlxuICAgICAgeSA9IG1lZGlhbih5UG9pbnRzKVxuICAgICAgYnJlYWtcblxuICB9XG4gIGxldCByZWN0ID0gY3JlYXRlTnMoJ2xpbmUnKVxuICByZWN0LnNldEF0dHJpYnV0ZSgnc2hhcGUtcmVuZGVyaW5nJywgJ2NyaXNwRWRnZXMnKVxuICByZWN0LnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgc3Ryb2tlKVxuICByZWN0LnNldEF0dHJpYnV0ZSgnc3Ryb2tlLW9wYWNpdHknLCBzdHJva2VPcGFjaXR5KVxuICByZWN0LnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWRhc2hhcnJheScsIHN0cm9rZURhc2hhcnJheSlcbiAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3gxJywgcG9pbnRBcnJbMF0ueClcbiAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3kxJywgeSlcbiAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3gyJywgcG9pbnRBcnJbcG9pbnRBcnIubGVuZ3RoIC0gMV0ueClcbiAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3kyJywgeSlcbiAgZy5hcHBlbmRDaGlsZChyZWN0KVxufVxuIiwiaW1wb3J0IHtkYXRhVG9Qb2ludHMsIGNyZWF0ZU5zLCBkZWFsTGluZURhdGEsIGRlYWxCYXJEYXRhLCBkZWFsTWFya0xpbmV9IGZyb20gJy4vdXRpbHMvdXRpbCdcblxuY2xhc3MgU21hbGxDaGFydCB7XG4gIGNvbnN0cnVjdG9yKGRvbSkge1xuICAgIHRoaXMuZG9tID0gZG9tXG4gICAgdGhpcy53aWR0aCA9ICcnXG4gICAgdGhpcy5oZWlnaHQgPSAnJ1xuICAgIHRoaXMuc3ZnID0gJydcbiAgICB0aGlzLm1heCA9ICcnXG4gICAgdGhpcy5taW4gPSAnJ1xuICAgIHRoaXMubWFyZ2luID0gJydcbiAgfVxuXG4gIHN0YXRpYyBpbml0KGRvbSkge1xuICAgIHJldHVybiBuZXcgU21hbGxDaGFydChkb20pXG4gIH1cblxuICBkZWFsU2VyaWVzKHNlcmllcykge1xuICAgIHJldHVybiBzZXJpZXMubWFwKChpdGVtKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGRhdGEsXG4gICAgICAgIGxpbWl0ID0gZGF0YS5sZW5ndGhcbiAgICAgIH0gPSBpdGVtXG4gICAgICBjb25zdCBwb2ludEFyciA9IGRhdGFUb1BvaW50cyh7XG4gICAgICAgIGRhdGEsXG4gICAgICAgIGxpbWl0LFxuICAgICAgICB3aWR0aDogdGhpcy53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCxcbiAgICAgICAgbWF4OiB0aGlzLm1heCxcbiAgICAgICAgbWluOiB0aGlzLm1pbixcbiAgICAgICAgbWFyZ2luOiB0aGlzLm1hcmdpblxuICAgICAgfSlcbiAgICAgIHJldHVybiB7Li4uaXRlbSwgbGltaXQsIHBvaW50QXJyfVxuICAgIH0pXG4gIH1cblxuICBjcmVhdGVQYXRoKHNlcmllcykge1xuICAgIGNvbnN0IGcgPSBjcmVhdGVOcygnZycpXG4gICAgbGV0IGRhdGEgPSB0aGlzLmRlYWxTZXJpZXMoc2VyaWVzKVxuICAgIGRhdGEuZm9yRWFjaCgoaSkgPT4ge1xuICAgICAgc3dpdGNoIChpLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnbGluZSc6XG4gICAgICAgICAgZGVhbExpbmVEYXRhKGksIHRoaXMsIGcpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnYmFyJzpcbiAgICAgICAgICBkZWFsQmFyRGF0YShpLCB0aGlzLCBnKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3BpZSc6XG4gICAgICAgICAgLy8gYXBwZW5kUG9seWxpbmUoZywgaSlcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgaWYgKGkubWFya0xpbmUgJiYgaS5tYXJrTGluZS50eXBlKSB7XG4gICAgICAgIGRlYWxNYXJrTGluZShpLCBnKVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIGdcbiAgfVxuXG4gIHNldE9wdGlvbihvcHRpb24gPSB7fSkge1xuICAgIGxldCB7d2lkdGggPSAxMDAsIGhlaWdodCA9IDMwLCBzZXJpZXMsIG1heCwgbWluLCBtYXJnaW4gPSAyfSA9IG9wdGlvblxuICAgIHRoaXMud2lkdGggPSB3aWR0aFxuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0XG4gICAgdGhpcy5tYXggPSBtYXhcbiAgICB0aGlzLm1pbiA9IG1pblxuICAgIHRoaXMubWFyZ2luID0gbWFyZ2luXG4gICAgaWYgKCFzZXJpZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUGxlYXNlIG9wdGlvbiBtdXN0IGhhdmUgc2VyaWVzIScpXG4gICAgfVxuICAgIGlmICghdGhpcy5zdmcpIHtcbiAgICAgIHRoaXMuc3ZnID0gY3JlYXRlTnMoJ3N2ZycpXG4gICAgICB0aGlzLnN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCBgMCAwICR7d2lkdGh9ICR7aGVpZ2h0fWApXG4gICAgICB0aGlzLnN2Zy5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYHdpZHRoOiR7d2lkdGh9cHg7IGhlaWdodDoke2hlaWdodH1weGApXG4gICAgICB0aGlzLnN2Zy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVBhdGgoc2VyaWVzKSlcbiAgICAgIHRoaXMuZG9tLmFwcGVuZENoaWxkKHRoaXMuc3ZnKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN2Zy5pbm5lckhUTUwgPSAnJ1xuICAgICAgdGhpcy5zdmcuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVQYXRoKHNlcmllcykpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNtYWxsQ2hhcnRcbiIsImltcG9ydCBTbWFsbENoYXJ0IGZyb20gJy4uL3NyYy9zbWFsbGNoYXJ0J1xuXG53aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICBsZXQgbGluZTEgPSBTbWFsbENoYXJ0LmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmUxJykpXG4gIGxpbmUxLnNldE9wdGlvbih7XG4gICAgc2VyaWVzOiBbe1xuICAgICAgZGF0YTogWzgyMCwgOTMyLCA5MDEsIDkzNCwgMTI5MCwgMTMzMCwgMTMyMF0sXG4gICAgICB0eXBlOiAnbGluZScsXG4gICAgICBmaWxsOiAnIzg5NTZGRicsXG4gICAgICBzdHJva2U6ICcjODk1NkZGJ1xuICAgIH1dXG4gIH0pXG4gIGxldCBsaW5lMiA9IFNtYWxsQ2hhcnQuaW5pdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGluZTInKSlcbiAgbGluZTIuc2V0T3B0aW9uKHtcbiAgICAvLyB3aWR0aDogMjAwLFxuICAgIC8vIGhlaWdodDogMTAwLFxuICAgIHNlcmllczogW3tcbiAgICAgIGRhdGE6IFs4MjAsIDkzMiwgOTAxLCA5MzQsIDEyOTAsIDEzMzAsIDEzMjBdLFxuICAgICAgdHlwZTogJ2xpbmUnLFxuICAgICAgZmlsbDogJyM4OTU2RkYnLFxuICAgICAgc3Ryb2tlOiAnIzg5NTZGRicsXG4gICAgICBzdHJva2VXaWR0aDogNCxcbiAgICAgIC8vIHN0cm9rZURhc2hhcnJheTogNSxcbiAgICAgIHNtb290aDogdHJ1ZVxuICAgIH1dXG4gIH0pXG4gIGxldCBiYXIxID0gU21hbGxDaGFydC5pbml0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXIxJykpXG4gIGJhcjEuc2V0T3B0aW9uKHtcbiAgICBzZXJpZXM6IFt7XG4gICAgICBkYXRhOiBbODIwLCA5MzIsIDkwMSwgOTM0LCAxMjkwLCAxMzMwLCAxMzIwXSxcbiAgICAgIHR5cGU6ICdiYXInLFxuICAgICAgZmlsbDogJyM4OTU2RkYnXG4gICAgfV1cbiAgfSlcblxuICBsZXQgbGluZTMgPSBTbWFsbENoYXJ0LmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmUzJykpXG4gIGxpbmUzLnNldE9wdGlvbih7XG4gICAgc2VyaWVzOiBbe1xuICAgICAgZGF0YTogWzgyMCwgOTMyLCA5MDEsIDkzNCwgMTI5MCwgMTMzMCwgMTMyMF0sXG4gICAgICB0eXBlOiAnbGluZScsXG4gICAgICBmaWxsOiAnIzg5NTZGRicsXG4gICAgICBzdHJva2U6ICcjODk1NkZGJyxcbiAgICAgIG1hcmtMaW5lOiB7XG4gICAgICAgIHR5cGU6ICdhdmVyYWdlJyxcbiAgICAgICAgc3Ryb2tlOiAnI2QxNCcsXG4gICAgICAgIHN0cm9rZU9wYWNpdHk6IDEsXG4gICAgICAgIHN0cm9rZURhc2hhcnJheTogJzIsIDInXG4gICAgICB9XG4gICAgfV1cbiAgfSlcbn1cblxuIl0sInNvdXJjZVJvb3QiOiIifQ==
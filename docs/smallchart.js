(()=>{"use strict";function t(t){return Math.min.apply(Math,t)}function e(t){return Math.max.apply(Math,t)}function i(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}class s{constructor(t){this.dom=t,this.width="",this.height="",this.svg="",this.max="",this.min="",this.margin=""}static init(t){return new s(t)}dealSeries(i){return i.map((i=>{const{data:s,limit:n=s.length}=i,r=function({data:i,limit:s,width:n=1,height:r=1,max:h=e(i),min:a=t(i),margin:l}){const o=i.length;s&&s<o&&(i=i.slice(o-s));const c=(r-2*l)/(h-a||2),u=(n-2*l)/((s||o)-(o>1?1:0));return i.map(((t,e)=>({x:e*u+l,y:(h===a?1:h-t)*c+l})))}({data:s,limit:n,width:this.width,height:this.height,max:this.max,min:this.min,margin:this.margin});return{...i,limit:n,pointArr:r}}))}createPath(t){const e=i("g");return this.dealSeries(t).forEach((t=>{switch(t.type){case"line":!function(t,e,s){let{pointArr:n,smooth:r}=t,h=function(t,e){let i;if(e){let e;i=t.map((t=>function(t){let i;if(e){const s=.5*(t.x-e.x);i=["C",e.x+s,e.y,t.x-s,t.y,t.x,t.y]}else i=[t.x,t.y];return e=t,i}(t))).reduce(((t,e)=>t.concat(e)))}else i=t.map((t=>[t.x,t.y])).reduce(((t,e)=>t.concat(e)));return i}(n,r);const a=h.concat([r?`L ${n[n.length-1].x}`:n[n.length-1].x,e.height-e.margin,e.margin,e.height-e.margin]);let l={...t,pointsPath:h,closePointsPath:a};r?function(t,e){let s=i("path");if(s.setAttribute("d",`M${e.pointsPath.join(" ")}`),s.setAttribute("stroke",e.stroke||"slategray"),s.setAttribute("stroke-width",e.strokeWidth||2),s.setAttribute("stroke-dasharray",e.strokeDasharray||"none"),s.setAttribute("fill","none"),t.appendChild(s),e.fill){let n=i("path");n.setAttribute("d",`M${e.closePointsPath.join(" ")}`),n.setAttribute("fill",e.fill),n.setAttribute("fill-opacity",e.fillOpacity||".2"),t.insertBefore(n,s)}}(s,l):function(t,e){let s=i("polyline");if(s.setAttribute("points",e.pointsPath),s.setAttribute("stroke",e.stroke||"slategray"),s.setAttribute("stroke-width",e.strokeWidth||2),s.setAttribute("stroke-dasharray",e.strokeDasharray||"none"),s.setAttribute("fill","none"),t.appendChild(s),e.fill){let n=i("polyline");n.setAttribute("points",e.closePointsPath),n.setAttribute("fill",e.fill),n.setAttribute("fill-opacity",e.fillOpacity||".2"),t.insertBefore(n,s)}}(s,l)}(t,this,e);break;case"bar":!function(t,e,s){let{pointArr:n,data:r,limit:h}=t;const a=e.margin?2*e.margin:0,l=r.length===h,o=l?(e.width-h*a)/h:n&&n.length>=2?Math.max(0,n[1].x-n[0].x-a):0;if(o<1)throw new Error("Too much data, please enlarge the width or reduce the margin");n.forEach(((n,h)=>{const c=l?Math.ceil((o+a)*h+e.margin):Math.ceil(n.x*h),u=Math.ceil(n.y),d=Math.ceil(o),m=Math.ceil(Math.max(0,e.height-n.y)),g=r[h];!function(t,e,{x:s,y:n,width:r,height:h,num:a}){let l=i("rect");l.setAttribute("x",s),l.setAttribute("y",n),l.setAttribute("width",r),l.setAttribute("height",h),l.setAttribute("num",a),l.setAttribute("fill",e.fill||"#409EFF"),t.appendChild(l)}(s,t,{x:c,y:u,width:d,height:m,num:g})}))}(t,this,e)}})),e}setOption(t={}){let{width:e=100,height:s=30,series:n,max:r,min:h,margin:a=2}=t;if(this.width=e,this.height=s,this.max=r,this.min=h,this.margin=a,!n)throw new Error("Please option must have series!");this.svg?(this.svg.innerHTML="",this.svg.appendChild(this.createPath(n))):(this.svg=i("svg"),this.svg.setAttribute("viewBox",`0 0 ${e} ${s}`),this.svg.setAttribute("style",`width:${e}px; height:${s}px`),this.svg.appendChild(this.createPath(n)),this.dom.appendChild(this.svg))}}const n=s;window.onload=function(){n.init(document.getElementById("line1")).setOption({series:[{data:[820,932,901,934,1290,1330,1320],type:"line",fill:"#8956FF",stroke:"#8956FF"}]}),n.init(document.getElementById("line2")).setOption({series:[{data:[820,932,901,934,1290,1330,1320],type:"line",fill:"#8956FF",stroke:"#8956FF",strokeWidth:4,smooth:!0}]}),n.init(document.getElementById("bar1")).setOption({series:[{data:[820,932,901,934,1290,1330,1320],type:"bar",fill:"#8956FF"}]})}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFsbGNoYXJ0Ly4vc3JjL3V0aWxzL3V0aWwuanMiLCJ3ZWJwYWNrOi8vc21hbGxjaGFydC8uL3NyYy9zbWFsbGNoYXJ0LmpzIiwid2VicGFjazovL3NtYWxsY2hhcnQvLi9kZW1vL2luZGV4LmpzIl0sIm5hbWVzIjpbImFycmF5TWluIiwiZGF0YSIsIk1hdGgiLCJtaW4iLCJhcHBseSIsImFycmF5TWF4IiwibWF4IiwiY3JlYXRlTnMiLCJ0eXBlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJTbWFsbENoYXJ0IiwiZG9tIiwidGhpcyIsIndpZHRoIiwiaGVpZ2h0Iiwic3ZnIiwibWFyZ2luIiwic2VyaWVzIiwibWFwIiwiaXRlbSIsImxpbWl0IiwibGVuZ3RoIiwicG9pbnRBcnIiLCJsZW4iLCJzbGljZSIsImgiLCJ3IiwiZCIsImkiLCJ4IiwieSIsImRhdGFUb1BvaW50cyIsImciLCJkZWFsU2VyaWVzIiwiZm9yRWFjaCIsIl90aGlzIiwic21vb3RoIiwicG9pbnRzUGF0aCIsInByZXYiLCJwIiwicmVzIiwiY3VydmUiLCJyZWR1Y2UiLCJhIiwiYiIsImNvbmNhdCIsInBvaW50c1RvUGF0aCIsImNsb3NlUG9pbnRzUGF0aCIsInBhcmVudCIsInBhdGgiLCJzZXRBdHRyaWJ1dGUiLCJqb2luIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJzdHJva2VEYXNoYXJyYXkiLCJhcHBlbmRDaGlsZCIsImZpbGwiLCJmaWxsUGF0aCIsImZpbGxPcGFjaXR5IiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kUGF0aCIsImFwcGVuZFBvbHlsaW5lIiwiZGVhbExpbmVEYXRhIiwibWFyZ2luV2lkdGgiLCJub0xpbWl0IiwiYmFyV2lkdGgiLCJFcnJvciIsImNlaWwiLCJudW0iLCJyZWN0IiwiYXBwZW5kUmVjdCIsImRlYWxCYXJEYXRhIiwib3B0aW9uIiwiaW5uZXJIVE1MIiwiY3JlYXRlUGF0aCIsIndpbmRvdyIsIm9ubG9hZCIsImdldEVsZW1l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LE9BQ05pRCxLQUFNLFVBQ05KLE9BQVEsY0FHQSxPQUFnQjVDLFNBQVNxRSxlQUFlLFVBQzlDQyxVQUFVLENBR2Q3RCxPQUFRLENBQUMsQ0FDUGpCLEtBQU0sQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLEtBQU0sS0FBTSxNQUN2Q08sS0FBTSxPQUNOaUQsS0FBTSxVQUNOSixPQUFRLFVBQ1JDLFlBQWEsRUFFYmpCLFFBQVEsTUFHRCxPQUFnQjVCLFNBQVNxRSxlQUFlLFNBQzlDQyxVQUFVLENBQ2I3RCxPQUFRLENBQUMsQ0FDUGpCLEtBQU0sQ0FBQyxJQUFLLElBQUssSUFBSyxJQUFLLEtBQU0sS0FBTSxNQUN2Q08sS0FBTSxNQUNOaUQsS0FBTSxnQiIsImZpbGUiOiJzbWFsbGNoYXJ0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGFycmF5TWluKGRhdGEpIHtcbiAgcmV0dXJuIE1hdGgubWluLmFwcGx5KE1hdGgsIGRhdGEpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcnJheU1heChkYXRhKSB7XG4gIHJldHVybiBNYXRoLm1heC5hcHBseShNYXRoLCBkYXRhKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTnModHlwZSkge1xuICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgdHlwZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZFBvbHlsaW5lKHBhcmVudCwgaSkge1xuICBsZXQgcGF0aCA9IGNyZWF0ZU5zKCdwb2x5bGluZScpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdwb2ludHMnLCBpLnBvaW50c1BhdGgpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdzdHJva2UnLCBpLnN0cm9rZSB8fCAnc2xhdGVncmF5JylcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsIGkuc3Ryb2tlV2lkdGggfHwgMilcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNoYXJyYXknLCBpLnN0cm9rZURhc2hhcnJheSB8fCAnbm9uZScpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdmaWxsJywgJ25vbmUnKVxuICBwYXJlbnQuYXBwZW5kQ2hpbGQocGF0aClcbiAgaWYgKGkuZmlsbCkge1xuICAgIGxldCBmaWxsUGF0aCA9IGNyZWF0ZU5zKCdwb2x5bGluZScpXG4gICAgZmlsbFBhdGguc2V0QXR0cmlidXRlKCdwb2ludHMnLCBpLmNsb3NlUG9pbnRzUGF0aClcbiAgICBmaWxsUGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCBpLmZpbGwpXG4gICAgZmlsbFBhdGguc2V0QXR0cmlidXRlKCdmaWxsLW9wYWNpdHknLCBpLmZpbGxPcGFjaXR5IHx8ICcuMicpXG4gICAgcGFyZW50Lmluc2VydEJlZm9yZShmaWxsUGF0aCwgcGF0aClcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwZW5kUGF0aChwYXJlbnQsIGkpIHtcbiAgbGV0IHBhdGggPSBjcmVhdGVOcygncGF0aCcpXG4gIHBhdGguc2V0QXR0cmlidXRlKCdkJywgYE0ke2kucG9pbnRzUGF0aC5qb2luKCcgJyl9YClcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsIGkuc3Ryb2tlIHx8ICdzbGF0ZWdyYXknKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgaS5zdHJva2VXaWR0aCB8fCAyKVxuICBwYXRoLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWRhc2hhcnJheScsIGkuc3Ryb2tlRGFzaGFycmF5IHx8ICdub25lJylcbiAgcGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnbm9uZScpXG4gIHBhcmVudC5hcHBlbmRDaGlsZChwYXRoKVxuICBpZiAoaS5maWxsKSB7XG4gICAgbGV0IGZpbGxQYXRoID0gY3JlYXRlTnMoJ3BhdGgnKVxuICAgIGZpbGxQYXRoLnNldEF0dHJpYnV0ZSgnZCcsIGBNJHtpLmNsb3NlUG9pbnRzUGF0aC5qb2luKCcgJyl9YClcbiAgICBmaWxsUGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCBpLmZpbGwpXG4gICAgZmlsbFBhdGguc2V0QXR0cmlidXRlKCdmaWxsLW9wYWNpdHknLCBpLmZpbGxPcGFjaXR5IHx8ICcuMicpXG4gICAgcGFyZW50Lmluc2VydEJlZm9yZShmaWxsUGF0aCwgcGF0aClcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwZW5kUmVjdChwYXJlbnQsIGksIHt4LCB5LCB3aWR0aCwgaGVpZ2h0LCBudW19KSB7XG4gIGxldCByZWN0ID0gY3JlYXRlTnMoJ3JlY3QnKVxuICByZWN0LnNldEF0dHJpYnV0ZSgneCcsIHgpXG4gIHJlY3Quc2V0QXR0cmlidXRlKCd5JywgeSlcbiAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgd2lkdGgpXG4gIHJlY3Quc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBoZWlnaHQpXG4gIHJlY3Quc2V0QXR0cmlidXRlKCdudW0nLCBudW0pXG4gIHJlY3Quc2V0QXR0cmlidXRlKCdmaWxsJywgaS5maWxsIHx8ICcjNDA5RUZGJylcbiAgcGFyZW50LmFwcGVuZENoaWxkKHJlY3QpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkYXRhVG9Qb2ludHMoXG4gIHtcbiAgICBkYXRhLFxuICAgIGxpbWl0LFxuICAgIHdpZHRoID0gMSxcbiAgICBoZWlnaHQgPSAxLFxuICAgIG1heCA9IGFycmF5TWF4KGRhdGEpLFxuICAgIG1pbiA9IGFycmF5TWluKGRhdGEpLFxuICAgIG1hcmdpblxuICB9XG4pIHtcbiAgY29uc3QgbGVuID0gZGF0YS5sZW5ndGhcblxuICBpZiAobGltaXQgJiYgbGltaXQgPCBsZW4pIHtcbiAgICBkYXRhID0gZGF0YS5zbGljZShsZW4gLSBsaW1pdClcbiAgfVxuXG4gIGNvbnN0IGggPSAoaGVpZ2h0IC0gbWFyZ2luICogMikgLyAoKG1heCAtIG1pbikgfHwgMilcbiAgY29uc3QgdyA9ICh3aWR0aCAtIG1hcmdpbiAqIDIpIC8gKChsaW1pdCB8fCBsZW4pIC0gKGxlbiA+IDEgPyAxIDogMCkpXG5cbiAgcmV0dXJuIGRhdGEubWFwKChkLCBpKSA9PiAoe1xuICAgIHg6IGkgKiB3ICsgbWFyZ2luLFxuICAgIHk6IChtYXggPT09IG1pbiA/IDEgOiAobWF4IC0gZCkpICogaCArIG1hcmdpblxuICB9KSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBvaW50c1RvUGF0aChwb2ludEFyciwgc21vb3RoKSB7XG4gIGxldCBwb2ludHNQYXRoXG4gIGlmIChzbW9vdGgpIHtcbiAgICBsZXQgcHJldlxuXG4gICAgZnVuY3Rpb24gY3VydmUocCkge1xuICAgICAgbGV0IHJlc1xuICAgICAgaWYgKCFwcmV2KSB7XG4gICAgICAgIHJlcyA9IFtwLngsIHAueV1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGxlbiA9IChwLnggLSBwcmV2LngpICogMC41XG4gICAgICAgIHJlcyA9IFtcbiAgICAgICAgICAnQycsXG4gICAgICAgICAgcHJldi54ICsgbGVuLFxuICAgICAgICAgIHByZXYueSxcbiAgICAgICAgICBwLnggLSBsZW4sXG4gICAgICAgICAgcC55LFxuICAgICAgICAgIHAueCxcbiAgICAgICAgICBwLnlcbiAgICAgICAgXVxuICAgICAgfVxuICAgICAgcHJldiA9IHBcbiAgICAgIHJldHVybiByZXNcbiAgICB9XG5cbiAgICBwb2ludHNQYXRoID0gcG9pbnRBcnIubWFwKHAgPT4gY3VydmUocCkpLnJlZHVjZSgoYSwgYikgPT4gYS5jb25jYXQoYikpXG4gIH0gZWxzZSB7XG4gICAgcG9pbnRzUGF0aCA9IHBvaW50QXJyLm1hcChwID0+IFtwLngsIHAueV0pLnJlZHVjZSgoYSwgYikgPT4gYS5jb25jYXQoYikpXG4gIH1cbiAgcmV0dXJuIHBvaW50c1BhdGhcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYWxMaW5lRGF0YShpdGVtLCBfdGhpcywgZykge1xuICBsZXQge3BvaW50QXJyLCBzbW9vdGh9ID0gaXRlbVxuICAvLyDlsZXnpLrnmoTot6/lvoRcbiAgbGV0IHBvaW50c1BhdGggPSBwb2ludHNUb1BhdGgocG9pbnRBcnIsIHNtb290aClcbiAgLy8g6Zet5ZCI6Lev5b6E5L2c5Li65bGV56S66Zi05b2xXG4gIGNvbnN0IGNsb3NlUG9pbnRzUGF0aCA9IHBvaW50c1BhdGguY29uY2F0KFtcbiAgICBzbW9vdGggPyBgTCAke3BvaW50QXJyW3BvaW50QXJyLmxlbmd0aCAtIDFdLnh9YCA6IHBvaW50QXJyW3BvaW50QXJyLmxlbmd0aCAtIDFdLngsXG4gICAgX3RoaXMuaGVpZ2h0IC0gX3RoaXMubWFyZ2luLFxuICAgIF90aGlzLm1hcmdpbixcbiAgICBfdGhpcy5oZWlnaHQgLSBfdGhpcy5tYXJnaW4sXG4gIF0pXG4gIGxldCBkID0gey4uLml0ZW0sIHBvaW50c1BhdGgsIGNsb3NlUG9pbnRzUGF0aH1cbiAgc21vb3RoID8gYXBwZW5kUGF0aChnLCBkKSA6IGFwcGVuZFBvbHlsaW5lKGcsIGQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWFsQmFyRGF0YShpdGVtLCBfdGhpcywgZykge1xuICBsZXQge3BvaW50QXJyLCBkYXRhLCBsaW1pdH0gPSBpdGVtXG4gIGNvbnN0IG1hcmdpbldpZHRoID0gX3RoaXMubWFyZ2luID8gMiAqIF90aGlzLm1hcmdpbiA6IDBcbiAgY29uc3Qgbm9MaW1pdCA9IGRhdGEubGVuZ3RoID09PSBsaW1pdFxuICBjb25zdCBiYXJXaWR0aCA9IG5vTGltaXRcbiAgICA/ICgoX3RoaXMud2lkdGggLSBsaW1pdCAqIG1hcmdpbldpZHRoKSAvIGxpbWl0KVxuICAgIDogKHBvaW50QXJyICYmIHBvaW50QXJyLmxlbmd0aCA+PSAyID8gTWF0aC5tYXgoMCwgcG9pbnRBcnJbMV0ueCAtIHBvaW50QXJyWzBdLnggLSBtYXJnaW5XaWR0aCkgOiAwKVxuXG4gIGlmIChiYXJXaWR0aCA8IDEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RvbyBtdWNoIGRhdGEsIHBsZWFzZSBlbmxhcmdlIHRoZSB3aWR0aCBvciByZWR1Y2UgdGhlIG1hcmdpbicpXG4gIH1cblxuICBwb2ludEFyci5mb3JFYWNoKChwLCBpKSA9PiB7XG4gICAgY29uc3QgeCA9IG5vTGltaXQgPyBNYXRoLmNlaWwoKGJhcldpZHRoICsgbWFyZ2luV2lkdGgpICogaSArIF90aGlzLm1hcmdpbikgOiBNYXRoLmNlaWwocC54ICogaSlcbiAgICBjb25zdCB5ID0gTWF0aC5jZWlsKHAueSlcbiAgICBjb25zdCB3aWR0aCA9IE1hdGguY2VpbChiYXJXaWR0aClcbiAgICBjb25zdCBoZWlnaHQgPSBNYXRoLmNlaWwoTWF0aC5tYXgoMCwgX3RoaXMuaGVpZ2h0IC0gcC55KSlcbiAgICBjb25zdCBudW0gPSBkYXRhW2ldXG4gICAgYXBwZW5kUmVjdChnLCBpdGVtLCB7eCwgeSwgd2lkdGgsIGhlaWdodCwgbnVtfSlcbiAgfSlcbn1cbiIsImltcG9ydCB7ZGF0YVRvUG9pbnRzLCBjcmVhdGVOcywgZGVhbExpbmVEYXRhLCBkZWFsQmFyRGF0YX0gZnJvbSAnLi91dGlscy91dGlsJ1xuXG5jbGFzcyBTbWFsbENoYXJ0IHtcbiAgY29uc3RydWN0b3IoZG9tKSB7XG4gICAgdGhpcy5kb20gPSBkb21cbiAgICB0aGlzLndpZHRoID0gJydcbiAgICB0aGlzLmhlaWdodCA9ICcnXG4gICAgdGhpcy5zdmcgPSAnJ1xuICAgIHRoaXMubWF4ID0gJydcbiAgICB0aGlzLm1pbiA9ICcnXG4gICAgdGhpcy5tYXJnaW4gPSAnJ1xuICB9XG5cbiAgc3RhdGljIGluaXQoZG9tKSB7XG4gICAgcmV0dXJuIG5ldyBTbWFsbENoYXJ0KGRvbSlcbiAgfVxuXG4gIGRlYWxTZXJpZXMoc2VyaWVzKSB7XG4gICAgcmV0dXJuIHNlcmllcy5tYXAoKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZGF0YSxcbiAgICAgICAgbGltaXQgPSBkYXRhLmxlbmd0aFxuICAgICAgfSA9IGl0ZW1cbiAgICAgIGNvbnN0IHBvaW50QXJyID0gZGF0YVRvUG9pbnRzKHtcbiAgICAgICAgZGF0YSxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHdpZHRoOiB0aGlzLndpZHRoLFxuICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxuICAgICAgICBtYXg6IHRoaXMubWF4LFxuICAgICAgICBtaW46IHRoaXMubWluLFxuICAgICAgICBtYXJnaW46IHRoaXMubWFyZ2luXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHsuLi5pdGVtLCBsaW1pdCwgcG9pbnRBcnJ9XG4gICAgfSlcbiAgfVxuXG4gIGNyZWF0ZVBhdGgoc2VyaWVzKSB7XG4gICAgY29uc3QgZyA9IGNyZWF0ZU5zKCdnJylcbiAgICBsZXQgZGF0YSA9IHRoaXMuZGVhbFNlcmllcyhzZXJpZXMpXG4gICAgZGF0YS5mb3JFYWNoKChpKSA9PiB7XG4gICAgICBzd2l0Y2ggKGkudHlwZSkge1xuICAgICAgICBjYXNlICdsaW5lJzpcbiAgICAgICAgICBkZWFsTGluZURhdGEoaSwgdGhpcywgZylcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdiYXInOlxuICAgICAgICAgIGRlYWxCYXJEYXRhKGksIHRoaXMsIGcpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAncGllJzpcbiAgICAgICAgICAvLyBhcHBlbmRQb2x5bGluZShnLCBpKVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gZ1xuICB9XG5cbiAgc2V0T3B0aW9uKG9wdGlvbiA9IHt9KSB7XG4gICAgbGV0IHt3aWR0aCA9IDEwMCwgaGVpZ2h0ID0gMzAsIHNlcmllcywgbWF4LCBtaW4sIG1hcmdpbiA9IDJ9ID0gb3B0aW9uXG4gICAgdGhpcy53aWR0aCA9IHdpZHRoXG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHRcbiAgICB0aGlzLm1heCA9IG1heFxuICAgIHRoaXMubWluID0gbWluXG4gICAgdGhpcy5tYXJnaW4gPSBtYXJnaW5cbiAgICBpZiAoIXNlcmllcykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2Ugb3B0aW9uIG11c3QgaGF2ZSBzZXJpZXMhJylcbiAgICB9XG4gICAgaWYgKCF0aGlzLnN2Zykge1xuICAgICAgdGhpcy5zdmcgPSBjcmVhdGVOcygnc3ZnJylcbiAgICAgIHRoaXMuc3ZnLnNldEF0dHJpYnV0ZSgndmlld0JveCcsIGAwIDAgJHt3aWR0aH0gJHtoZWlnaHR9YClcbiAgICAgIHRoaXMuc3ZnLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgd2lkdGg6JHt3aWR0aH1weDsgaGVpZ2h0OiR7aGVpZ2h0fXB4YClcbiAgICAgIHRoaXMuc3ZnLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlUGF0aChzZXJpZXMpKVxuICAgICAgdGhpcy5kb20uYXBwZW5kQ2hpbGQodGhpcy5zdmcpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3ZnLmlubmVySFRNTCA9ICcnXG4gICAgICB0aGlzLnN2Zy5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVBhdGgoc2VyaWVzKSlcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU21hbGxDaGFydFxuIiwiaW1wb3J0IFNtYWxsQ2hhcnQgZnJvbSAnLi4vc3JjL3NtYWxsY2hhcnQnXG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gIGxldCBsaW5lMSA9IFNtYWxsQ2hhcnQuaW5pdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGluZTEnKSlcbiAgbGluZTEuc2V0T3B0aW9uKHtcbiAgICBzZXJpZXM6IFt7XG4gICAgICBkYXRhOiBbODIwLCA5MzIsIDkwMSwgOTM0LCAxMjkwLCAxMzMwLCAxMzIwXSxcbiAgICAgIHR5cGU6ICdsaW5lJyxcbiAgICAgIGZpbGw6ICcjODk1NkZGJyxcbiAgICAgIHN0cm9rZTogJyM4OTU2RkYnXG4gICAgfV1cbiAgfSlcbiAgbGV0IGxpbmUyID0gU21hbGxDaGFydC5pbml0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5lMicpKVxuICBsaW5lMi5zZXRPcHRpb24oe1xuICAgIC8vIHdpZHRoOiAyMDAsXG4gICAgLy8gaGVpZ2h0OiAxMDAsXG4gICAgc2VyaWVzOiBbe1xuICAgICAgZGF0YTogWzgyMCwgOTMyLCA5MDEsIDkzNCwgMTI5MCwgMTMzMCwgMTMyMF0sXG4gICAgICB0eXBlOiAnbGluZScsXG4gICAgICBmaWxsOiAnIzg5NTZGRicsXG4gICAgICBzdHJva2U6ICcjODk1NkZGJyxcbiAgICAgIHN0cm9rZVdpZHRoOiA0LFxuICAgICAgLy8gc3Ryb2tlRGFzaGFycmF5OiA1LFxuICAgICAgc21vb3RoOiB0cnVlXG4gICAgfV1cbiAgfSlcbiAgbGV0IGJhcjEgPSBTbWFsbENoYXJ0LmluaXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhcjEnKSlcbiAgYmFyMS5zZXRPcHRpb24oe1xuICAgIHNlcmllczogW3tcbiAgICAgIGRhdGE6IFs4MjAsIDkzMiwgOTAxLCA5MzQsIDEyOTAsIDEzMzAsIDEzMjBdLFxuICAgICAgdHlwZTogJ2JhcicsXG4gICAgICBmaWxsOiAnIzg5NTZGRidcbiAgICB9XVxuICB9KVxufVxuXG4iXSwic291cmNlUm9vdCI6IiJ9